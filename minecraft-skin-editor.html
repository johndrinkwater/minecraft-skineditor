<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="content-type" content="text/html;charset=utf-8" />
<meta charset="utf-8" />
<title>Mine:Craft Your Skin</title>
<link rel="shortcut icon" type="image/png" href="i/favicon.png" />

<script type="text/javascript">
/* <![CDATA[ */
/* It should be in a museum! /Indiana Below is sylvester.js Something like it should be in WebGL API. */
eval(function(p,a,c,k,e,r){e=function(c){return(c<a?'':e(parseInt(c/a)))+((c=c%a)>35?String.fromCharCode(c+29):c.toString(36))};if(!''.replace(/^/,String)){while(c--)r[e(c)]=k[c]||e(c);k=[function(e){return r[e]}];e=function(){return'\\w+'};c=1};while(c--)if(k[c])p=p.replace(new RegExp('\\b'+e(c)+'\\b','g'),k[c]);return p}('9 17={3i:\'0.1.3\',16:1e-6};l v(){}v.23={e:l(i){8(i<1||i>7.4.q)?w:7.4[i-1]},2R:l(){8 7.4.q},1u:l(){8 F.1x(7.2u(7))},24:l(a){9 n=7.4.q;9 V=a.4||a;o(n!=V.q){8 1L}J{o(F.13(7.4[n-1]-V[n-1])>17.16){8 1L}}H(--n);8 2x},1q:l(){8 v.u(7.4)},1b:l(a){9 b=[];7.28(l(x,i){b.19(a(x,i))});8 v.u(b)},28:l(a){9 n=7.4.q,k=n,i;J{i=k-n;a(7.4[i],i+1)}H(--n)},2q:l(){9 r=7.1u();o(r===0){8 7.1q()}8 7.1b(l(x){8 x/r})},1C:l(a){9 V=a.4||a;9 n=7.4.q,k=n,i;o(n!=V.q){8 w}9 b=0,1D=0,1F=0;7.28(l(x,i){b+=x*V[i-1];1D+=x*x;1F+=V[i-1]*V[i-1]});1D=F.1x(1D);1F=F.1x(1F);o(1D*1F===0){8 w}9 c=b/(1D*1F);o(c<-1){c=-1}o(c>1){c=1}8 F.37(c)},1m:l(a){9 b=7.1C(a);8(b===w)?w:(b<=17.16)},34:l(a){9 b=7.1C(a);8(b===w)?w:(F.13(b-F.1A)<=17.16)},2k:l(a){9 b=7.2u(a);8(b===w)?w:(F.13(b)<=17.16)},2j:l(a){9 V=a.4||a;o(7.4.q!=V.q){8 w}8 7.1b(l(x,i){8 x+V[i-1]})},2C:l(a){9 V=a.4||a;o(7.4.q!=V.q){8 w}8 7.1b(l(x,i){8 x-V[i-1]})},22:l(k){8 7.1b(l(x){8 x*k})},x:l(k){8 7.22(k)},2u:l(a){9 V=a.4||a;9 i,2g=0,n=7.4.q;o(n!=V.q){8 w}J{2g+=7.4[n-1]*V[n-1]}H(--n);8 2g},2f:l(a){9 B=a.4||a;o(7.4.q!=3||B.q!=3){8 w}9 A=7.4;8 v.u([(A[1]*B[2])-(A[2]*B[1]),(A[2]*B[0])-(A[0]*B[2]),(A[0]*B[1])-(A[1]*B[0])])},2A:l(){9 m=0,n=7.4.q,k=n,i;J{i=k-n;o(F.13(7.4[i])>F.13(m)){m=7.4[i]}}H(--n);8 m},2Z:l(x){9 a=w,n=7.4.q,k=n,i;J{i=k-n;o(a===w&&7.4[i]==x){a=i+1}}H(--n);8 a},3g:l(){8 S.2X(7.4)},2d:l(){8 7.1b(l(x){8 F.2d(x)})},2V:l(x){8 7.1b(l(y){8(F.13(y-x)<=17.16)?x:y})},1o:l(a){o(a.K){8 a.1o(7)}9 V=a.4||a;o(V.q!=7.4.q){8 w}9 b=0,2b;7.28(l(x,i){2b=x-V[i-1];b+=2b*2b});8 F.1x(b)},3a:l(a){8 a.1h(7)},2T:l(a){8 a.1h(7)},1V:l(t,a){9 V,R,x,y,z;2S(7.4.q){27 2:V=a.4||a;o(V.q!=2){8 w}R=S.1R(t).4;x=7.4[0]-V[0];y=7.4[1]-V[1];8 v.u([V[0]+R[0][0]*x+R[0][1]*y,V[1]+R[1][0]*x+R[1][1]*y]);1I;27 3:o(!a.U){8 w}9 C=a.1r(7).4;R=S.1R(t,a.U).4;x=7.4[0]-C[0];y=7.4[1]-C[1];z=7.4[2]-C[2];8 v.u([C[0]+R[0][0]*x+R[0][1]*y+R[0][2]*z,C[1]+R[1][0]*x+R[1][1]*y+R[1][2]*z,C[2]+R[2][0]*x+R[2][1]*y+R[2][2]*z]);1I;2P:8 w}},1t:l(a){o(a.K){9 P=7.4.2O();9 C=a.1r(P).4;8 v.u([C[0]+(C[0]-P[0]),C[1]+(C[1]-P[1]),C[2]+(C[2]-(P[2]||0))])}1d{9 Q=a.4||a;o(7.4.q!=Q.q){8 w}8 7.1b(l(x,i){8 Q[i-1]+(Q[i-1]-x)})}},1N:l(){9 V=7.1q();2S(V.4.q){27 3:1I;27 2:V.4.19(0);1I;2P:8 w}8 V},2n:l(){8\'[\'+7.4.2K(\', \')+\']\'},26:l(a){7.4=(a.4||a).2O();8 7}};v.u=l(a){9 V=25 v();8 V.26(a)};v.i=v.u([1,0,0]);v.j=v.u([0,1,0]);v.k=v.u([0,0,1]);v.2J=l(n){9 a=[];J{a.19(F.2F())}H(--n);8 v.u(a)};v.1j=l(n){9 a=[];J{a.19(0)}H(--n);8 v.u(a)};l S(){}S.23={e:l(i,j){o(i<1||i>7.4.q||j<1||j>7.4[0].q){8 w}8 7.4[i-1][j-1]},33:l(i){o(i>7.4.q){8 w}8 v.u(7.4[i-1])},2E:l(j){o(j>7.4[0].q){8 w}9 a=[],n=7.4.q,k=n,i;J{i=k-n;a.19(7.4[i][j-1])}H(--n);8 v.u(a)},2R:l(){8{2D:7.4.q,1p:7.4[0].q}},2D:l(){8 7.4.q},1p:l(){8 7.4[0].q},24:l(a){9 M=a.4||a;o(1g(M[0][0])==\'1f\'){M=S.u(M).4}o(7.4.q!=M.q||7.4[0].q!=M[0].q){8 1L}9 b=7.4.q,15=b,i,G,10=7.4[0].q,j;J{i=15-b;G=10;J{j=10-G;o(F.13(7.4[i][j]-M[i][j])>17.16){8 1L}}H(--G)}H(--b);8 2x},1q:l(){8 S.u(7.4)},1b:l(a){9 b=[],12=7.4.q,15=12,i,G,10=7.4[0].q,j;J{i=15-12;G=10;b[i]=[];J{j=10-G;b[i][j]=a(7.4[i][j],i+1,j+1)}H(--G)}H(--12);8 S.u(b)},2i:l(a){9 M=a.4||a;o(1g(M[0][0])==\'1f\'){M=S.u(M).4}8(7.4.q==M.q&&7.4[0].q==M[0].q)},2j:l(a){9 M=a.4||a;o(1g(M[0][0])==\'1f\'){M=S.u(M).4}o(!7.2i(M)){8 w}8 7.1b(l(x,i,j){8 x+M[i-1][j-1]})},2C:l(a){9 M=a.4||a;o(1g(M[0][0])==\'1f\'){M=S.u(M).4}o(!7.2i(M)){8 w}8 7.1b(l(x,i,j){8 x-M[i-1][j-1]})},2B:l(a){9 M=a.4||a;o(1g(M[0][0])==\'1f\'){M=S.u(M).4}8(7.4[0].q==M.q)},22:l(a){o(!a.4){8 7.1b(l(x){8 x*a})}9 b=a.1u?2x:1L;9 M=a.4||a;o(1g(M[0][0])==\'1f\'){M=S.u(M).4}o(!7.2B(M)){8 w}9 d=7.4.q,15=d,i,G,10=M[0].q,j;9 e=7.4[0].q,4=[],21,20,c;J{i=15-d;4[i]=[];G=10;J{j=10-G;21=0;20=e;J{c=e-20;21+=7.4[i][c]*M[c][j]}H(--20);4[i][j]=21}H(--G)}H(--d);9 M=S.u(4);8 b?M.2E(1):M},x:l(a){8 7.22(a)},32:l(a,b,c,d){9 e=[],12=c,i,G,j;9 f=7.4.q,1p=7.4[0].q;J{i=c-12;e[i]=[];G=d;J{j=d-G;e[i][j]=7.4[(a+i-1)%f][(b+j-1)%1p]}H(--G)}H(--12);8 S.u(e)},31:l(){9 a=7.4.q,1p=7.4[0].q;9 b=[],12=1p,i,G,j;J{i=1p-12;b[i]=[];G=a;J{j=a-G;b[i][j]=7.4[j][i]}H(--G)}H(--12);8 S.u(b)},1y:l(){8(7.4.q==7.4[0].q)},2A:l(){9 m=0,12=7.4.q,15=12,i,G,10=7.4[0].q,j;J{i=15-12;G=10;J{j=10-G;o(F.13(7.4[i][j])>F.13(m)){m=7.4[i][j]}}H(--G)}H(--12);8 m},2Z:l(x){9 a=w,12=7.4.q,15=12,i,G,10=7.4[0].q,j;J{i=15-12;G=10;J{j=10-G;o(7.4[i][j]==x){8{i:i+1,j:j+1}}}H(--G)}H(--12);8 w},30:l(){o(!7.1y){8 w}9 a=[],n=7.4.q,k=n,i;J{i=k-n;a.19(7.4[i][i])}H(--n);8 v.u(a)},1K:l(){9 M=7.1q(),1c;9 n=7.4.q,k=n,i,1s,1n=7.4[0].q,p;J{i=k-n;o(M.4[i][i]==0){2e(j=i+1;j<k;j++){o(M.4[j][i]!=0){1c=[];1s=1n;J{p=1n-1s;1c.19(M.4[i][p]+M.4[j][p])}H(--1s);M.4[i]=1c;1I}}}o(M.4[i][i]!=0){2e(j=i+1;j<k;j++){9 a=M.4[j][i]/M.4[i][i];1c=[];1s=1n;J{p=1n-1s;1c.19(p<=i?0:M.4[j][p]-M.4[i][p]*a)}H(--1s);M.4[j]=1c}}}H(--n);8 M},3h:l(){8 7.1K()},2z:l(){o(!7.1y()){8 w}9 M=7.1K();9 a=M.4[0][0],n=M.4.q-1,k=n,i;J{i=k-n+1;a=a*M.4[i][i]}H(--n);8 a},3f:l(){8 7.2z()},2y:l(){8(7.1y()&&7.2z()===0)},2Y:l(){o(!7.1y()){8 w}9 a=7.4[0][0],n=7.4.q-1,k=n,i;J{i=k-n+1;a+=7.4[i][i]}H(--n);8 a},3e:l(){8 7.2Y()},1Y:l(){9 M=7.1K(),1Y=0;9 a=7.4.q,15=a,i,G,10=7.4[0].q,j;J{i=15-a;G=10;J{j=10-G;o(F.13(M.4[i][j])>17.16){1Y++;1I}}H(--G)}H(--a);8 1Y},3d:l(){8 7.1Y()},2W:l(a){9 M=a.4||a;o(1g(M[0][0])==\'1f\'){M=S.u(M).4}9 T=7.1q(),1p=T.4[0].q;9 b=T.4.q,15=b,i,G,10=M[0].q,j;o(b!=M.q){8 w}J{i=15-b;G=10;J{j=10-G;T.4[i][1p+j]=M[i][j]}H(--G)}H(--b);8 T},2w:l(){o(!7.1y()||7.2y()){8 w}9 a=7.4.q,15=a,i,j;9 M=7.2W(S.I(a)).1K();9 b,1n=M.4[0].q,p,1c,2v;9 c=[],2c;J{i=a-1;1c=[];b=1n;c[i]=[];2v=M.4[i][i];J{p=1n-b;2c=M.4[i][p]/2v;1c.19(2c);o(p>=15){c[i].19(2c)}}H(--b);M.4[i]=1c;2e(j=0;j<i;j++){1c=[];b=1n;J{p=1n-b;1c.19(M.4[j][p]-M.4[i][p]*M.4[j][i])}H(--b);M.4[j]=1c}}H(--a);8 S.u(c)},3c:l(){8 7.2w()},2d:l(){8 7.1b(l(x){8 F.2d(x)})},2V:l(x){8 7.1b(l(p){8(F.13(p-x)<=17.16)?x:p})},2n:l(){9 a=[];9 n=7.4.q,k=n,i;J{i=k-n;a.19(v.u(7.4[i]).2n())}H(--n);8 a.2K(\'\\n\')},26:l(a){9 i,4=a.4||a;o(1g(4[0][0])!=\'1f\'){9 b=4.q,15=b,G,10,j;7.4=[];J{i=15-b;G=4[i].q;10=G;7.4[i]=[];J{j=10-G;7.4[i][j]=4[i][j]}H(--G)}H(--b);8 7}9 n=4.q,k=n;7.4=[];J{i=k-n;7.4.19([4[i]])}H(--n);8 7}};S.u=l(a){9 M=25 S();8 M.26(a)};S.I=l(n){9 a=[],k=n,i,G,j;J{i=k-n;a[i]=[];G=k;J{j=k-G;a[i][j]=(i==j)?1:0}H(--G)}H(--n);8 S.u(a)};S.2X=l(a){9 n=a.q,k=n,i;9 M=S.I(n);J{i=k-n;M.4[i][i]=a[i]}H(--n);8 M};S.1R=l(b,a){o(!a){8 S.u([[F.1H(b),-F.1G(b)],[F.1G(b),F.1H(b)]])}9 d=a.1q();o(d.4.q!=3){8 w}9 e=d.1u();9 x=d.4[0]/e,y=d.4[1]/e,z=d.4[2]/e;9 s=F.1G(b),c=F.1H(b),t=1-c;8 S.u([[t*x*x+c,t*x*y-s*z,t*x*z+s*y],[t*x*y+s*z,t*y*y+c,t*y*z-s*x],[t*x*z-s*y,t*y*z+s*x,t*z*z+c]])};S.3b=l(t){9 c=F.1H(t),s=F.1G(t);8 S.u([[1,0,0],[0,c,-s],[0,s,c]])};S.39=l(t){9 c=F.1H(t),s=F.1G(t);8 S.u([[c,0,s],[0,1,0],[-s,0,c]])};S.38=l(t){9 c=F.1H(t),s=F.1G(t);8 S.u([[c,-s,0],[s,c,0],[0,0,1]])};S.2J=l(n,m){8 S.1j(n,m).1b(l(){8 F.2F()})};S.1j=l(n,m){9 a=[],12=n,i,G,j;J{i=n-12;a[i]=[];G=m;J{j=m-G;a[i][j]=0}H(--G)}H(--12);8 S.u(a)};l 14(){}14.23={24:l(a){8(7.1m(a)&&7.1h(a.K))},1q:l(){8 14.u(7.K,7.U)},2U:l(a){9 V=a.4||a;8 14.u([7.K.4[0]+V[0],7.K.4[1]+V[1],7.K.4[2]+(V[2]||0)],7.U)},1m:l(a){o(a.W){8 a.1m(7)}9 b=7.U.1C(a.U);8(F.13(b)<=17.16||F.13(b-F.1A)<=17.16)},1o:l(a){o(a.W){8 a.1o(7)}o(a.U){o(7.1m(a)){8 7.1o(a.K)}9 N=7.U.2f(a.U).2q().4;9 A=7.K.4,B=a.K.4;8 F.13((A[0]-B[0])*N[0]+(A[1]-B[1])*N[1]+(A[2]-B[2])*N[2])}1d{9 P=a.4||a;9 A=7.K.4,D=7.U.4;9 b=P[0]-A[0],2a=P[1]-A[1],29=(P[2]||0)-A[2];9 c=F.1x(b*b+2a*2a+29*29);o(c===0)8 0;9 d=(b*D[0]+2a*D[1]+29*D[2])/c;9 e=1-d*d;8 F.13(c*F.1x(e<0?0:e))}},1h:l(a){9 b=7.1o(a);8(b!==w&&b<=17.16)},2T:l(a){8 a.1h(7)},1v:l(a){o(a.W){8 a.1v(7)}8(!7.1m(a)&&7.1o(a)<=17.16)},1U:l(a){o(a.W){8 a.1U(7)}o(!7.1v(a)){8 w}9 P=7.K.4,X=7.U.4,Q=a.K.4,Y=a.U.4;9 b=X[0],1z=X[1],1B=X[2],1T=Y[0],1S=Y[1],1M=Y[2];9 c=P[0]-Q[0],2s=P[1]-Q[1],2r=P[2]-Q[2];9 d=-b*c-1z*2s-1B*2r;9 e=1T*c+1S*2s+1M*2r;9 f=b*b+1z*1z+1B*1B;9 g=1T*1T+1S*1S+1M*1M;9 h=b*1T+1z*1S+1B*1M;9 k=(d*g/f+h*e)/(g-h*h);8 v.u([P[0]+k*b,P[1]+k*1z,P[2]+k*1B])},1r:l(a){o(a.U){o(7.1v(a)){8 7.1U(a)}o(7.1m(a)){8 w}9 D=7.U.4,E=a.U.4;9 b=D[0],1l=D[1],1k=D[2],1P=E[0],1O=E[1],1Q=E[2];9 x=(1k*1P-b*1Q),y=(b*1O-1l*1P),z=(1l*1Q-1k*1O);9 N=v.u([x*1Q-y*1O,y*1P-z*1Q,z*1O-x*1P]);9 P=11.u(a.K,N);8 P.1U(7)}1d{9 P=a.4||a;o(7.1h(P)){8 v.u(P)}9 A=7.K.4,D=7.U.4;9 b=D[0],1l=D[1],1k=D[2],1w=A[0],18=A[1],1a=A[2];9 x=b*(P[1]-18)-1l*(P[0]-1w),y=1l*((P[2]||0)-1a)-1k*(P[1]-18),z=1k*(P[0]-1w)-b*((P[2]||0)-1a);9 V=v.u([1l*x-1k*z,1k*y-b*x,b*z-1l*y]);9 k=7.1o(P)/V.1u();8 v.u([P[0]+V.4[0]*k,P[1]+V.4[1]*k,(P[2]||0)+V.4[2]*k])}},1V:l(t,a){o(1g(a.U)==\'1f\'){a=14.u(a.1N(),v.k)}9 R=S.1R(t,a.U).4;9 C=a.1r(7.K).4;9 A=7.K.4,D=7.U.4;9 b=C[0],1E=C[1],1J=C[2],1w=A[0],18=A[1],1a=A[2];9 x=1w-b,y=18-1E,z=1a-1J;8 14.u([b+R[0][0]*x+R[0][1]*y+R[0][2]*z,1E+R[1][0]*x+R[1][1]*y+R[1][2]*z,1J+R[2][0]*x+R[2][1]*y+R[2][2]*z],[R[0][0]*D[0]+R[0][1]*D[1]+R[0][2]*D[2],R[1][0]*D[0]+R[1][1]*D[1]+R[1][2]*D[2],R[2][0]*D[0]+R[2][1]*D[1]+R[2][2]*D[2]])},1t:l(a){o(a.W){9 A=7.K.4,D=7.U.4;9 b=A[0],18=A[1],1a=A[2],2N=D[0],1l=D[1],1k=D[2];9 c=7.K.1t(a).4;9 d=b+2N,2h=18+1l,2o=1a+1k;9 Q=a.1r([d,2h,2o]).4;9 e=[Q[0]+(Q[0]-d)-c[0],Q[1]+(Q[1]-2h)-c[1],Q[2]+(Q[2]-2o)-c[2]];8 14.u(c,e)}1d o(a.U){8 7.1V(F.1A,a)}1d{9 P=a.4||a;8 14.u(7.K.1t([P[0],P[1],(P[2]||0)]),7.U)}},1Z:l(a,b){a=v.u(a);b=v.u(b);o(a.4.q==2){a.4.19(0)}o(b.4.q==2){b.4.19(0)}o(a.4.q>3||b.4.q>3){8 w}9 c=b.1u();o(c===0){8 w}7.K=a;7.U=v.u([b.4[0]/c,b.4[1]/c,b.4[2]/c]);8 7}};14.u=l(a,b){9 L=25 14();8 L.1Z(a,b)};14.X=14.u(v.1j(3),v.i);14.Y=14.u(v.1j(3),v.j);14.Z=14.u(v.1j(3),v.k);l 11(){}11.23={24:l(a){8(7.1h(a.K)&&7.1m(a))},1q:l(){8 11.u(7.K,7.W)},2U:l(a){9 V=a.4||a;8 11.u([7.K.4[0]+V[0],7.K.4[1]+V[1],7.K.4[2]+(V[2]||0)],7.W)},1m:l(a){9 b;o(a.W){b=7.W.1C(a.W);8(F.13(b)<=17.16||F.13(F.1A-b)<=17.16)}1d o(a.U){8 7.W.2k(a.U)}8 w},2k:l(a){9 b=7.W.1C(a.W);8(F.13(F.1A/2-b)<=17.16)},1o:l(a){o(7.1v(a)||7.1h(a)){8 0}o(a.K){9 A=7.K.4,B=a.K.4,N=7.W.4;8 F.13((A[0]-B[0])*N[0]+(A[1]-B[1])*N[1]+(A[2]-B[2])*N[2])}1d{9 P=a.4||a;9 A=7.K.4,N=7.W.4;8 F.13((A[0]-P[0])*N[0]+(A[1]-P[1])*N[1]+(A[2]-(P[2]||0))*N[2])}},1h:l(a){o(a.W){8 w}o(a.U){8(7.1h(a.K)&&7.1h(a.K.2j(a.U)))}1d{9 P=a.4||a;9 A=7.K.4,N=7.W.4;9 b=F.13(N[0]*(A[0]-P[0])+N[1]*(A[1]-P[1])+N[2]*(A[2]-(P[2]||0)));8(b<=17.16)}},1v:l(a){o(1g(a.U)==\'1f\'&&1g(a.W)==\'1f\'){8 w}8!7.1m(a)},1U:l(a){o(!7.1v(a)){8 w}o(a.U){9 A=a.K.4,D=a.U.4,P=7.K.4,N=7.W.4;9 b=(N[0]*(P[0]-A[0])+N[1]*(P[1]-A[1])+N[2]*(P[2]-A[2]))/(N[0]*D[0]+N[1]*D[1]+N[2]*D[2]);8 v.u([A[0]+D[0]*b,A[1]+D[1]*b,A[2]+D[2]*b])}1d o(a.W){9 c=7.W.2f(a.W).2q();9 N=7.W.4,A=7.K.4,O=a.W.4,B=a.K.4;9 d=S.1j(2,2),i=0;H(d.2y()){i++;d=S.u([[N[i%3],N[(i+1)%3]],[O[i%3],O[(i+1)%3]]])}9 e=d.2w().4;9 x=N[0]*A[0]+N[1]*A[1]+N[2]*A[2];9 y=O[0]*B[0]+O[1]*B[1]+O[2]*B[2];9 f=[e[0][0]*x+e[0][1]*y,e[1][0]*x+e[1][1]*y];9 g=[];2e(9 j=1;j<=3;j++){g.19((i==j)?0:f[(j+(5-i)%3)%3])}8 14.u(g,c)}},1r:l(a){9 P=a.4||a;9 A=7.K.4,N=7.W.4;9 b=(A[0]-P[0])*N[0]+(A[1]-P[1])*N[1]+(A[2]-(P[2]||0))*N[2];8 v.u([P[0]+N[0]*b,P[1]+N[1]*b,(P[2]||0)+N[2]*b])},1V:l(t,a){9 R=S.1R(t,a.U).4;9 C=a.1r(7.K).4;9 A=7.K.4,N=7.W.4;9 b=C[0],1E=C[1],1J=C[2],1w=A[0],18=A[1],1a=A[2];9 x=1w-b,y=18-1E,z=1a-1J;8 11.u([b+R[0][0]*x+R[0][1]*y+R[0][2]*z,1E+R[1][0]*x+R[1][1]*y+R[1][2]*z,1J+R[2][0]*x+R[2][1]*y+R[2][2]*z],[R[0][0]*N[0]+R[0][1]*N[1]+R[0][2]*N[2],R[1][0]*N[0]+R[1][1]*N[1]+R[1][2]*N[2],R[2][0]*N[0]+R[2][1]*N[1]+R[2][2]*N[2]])},1t:l(a){o(a.W){9 A=7.K.4,N=7.W.4;9 b=A[0],18=A[1],1a=A[2],2M=N[0],2L=N[1],2Q=N[2];9 c=7.K.1t(a).4;9 d=b+2M,2p=18+2L,2m=1a+2Q;9 Q=a.1r([d,2p,2m]).4;9 e=[Q[0]+(Q[0]-d)-c[0],Q[1]+(Q[1]-2p)-c[1],Q[2]+(Q[2]-2m)-c[2]];8 11.u(c,e)}1d o(a.U){8 7.1V(F.1A,a)}1d{9 P=a.4||a;8 11.u(7.K.1t([P[0],P[1],(P[2]||0)]),7.W)}},1Z:l(a,b,c){a=v.u(a);a=a.1N();o(a===w){8 w}b=v.u(b);b=b.1N();o(b===w){8 w}o(1g(c)==\'1f\'){c=w}1d{c=v.u(c);c=c.1N();o(c===w){8 w}}9 d=a.4[0],18=a.4[1],1a=a.4[2];9 e=b.4[0],1W=b.4[1],1X=b.4[2];9 f,1i;o(c!==w){9 g=c.4[0],2l=c.4[1],2t=c.4[2];f=v.u([(1W-18)*(2t-1a)-(1X-1a)*(2l-18),(1X-1a)*(g-d)-(e-d)*(2t-1a),(e-d)*(2l-18)-(1W-18)*(g-d)]);1i=f.1u();o(1i===0){8 w}f=v.u([f.4[0]/1i,f.4[1]/1i,f.4[2]/1i])}1d{1i=F.1x(e*e+1W*1W+1X*1X);o(1i===0){8 w}f=v.u([b.4[0]/1i,b.4[1]/1i,b.4[2]/1i])}7.K=a;7.W=f;8 7}};11.u=l(a,b,c){9 P=25 11();8 P.1Z(a,b,c)};11.2I=11.u(v.1j(3),v.k);11.2H=11.u(v.1j(3),v.i);11.2G=11.u(v.1j(3),v.j);11.36=11.2I;11.35=11.2H;11.3j=11.2G;9 $V=v.u;9 $M=S.u;9 $L=14.u;9 $P=11.u;',62,206,'||||elements|||this|return|var||||||||||||function|||if||length||||create|Vector|null|||||||||Math|nj|while||do|anchor||||||||Matrix||direction||normal||||kj|Plane|ni|abs|Line|ki|precision|Sylvester|A2|push|A3|map|els|else||undefined|typeof|contains|mod|Zero|D3|D2|isParallelTo|kp|distanceFrom|cols|dup|pointClosestTo|np|reflectionIn|modulus|intersects|A1|sqrt|isSquare|X2|PI|X3|angleFrom|mod1|C2|mod2|sin|cos|break|C3|toRightTriangular|false|Y3|to3D|E2|E1|E3|Rotation|Y2|Y1|intersectionWith|rotate|v12|v13|rank|setVectors|nc|sum|multiply|prototype|eql|new|setElements|case|each|PA3|PA2|part|new_element|round|for|cross|product|AD2|isSameSizeAs|add|isPerpendicularTo|v22|AN3|inspect|AD3|AN2|toUnitVector|PsubQ3|PsubQ2|v23|dot|divisor|inverse|true|isSingular|determinant|max|canMultiplyFromLeft|subtract|rows|col|random|ZX|YZ|XY|Random|join|N2|N1|D1|slice|default|N3|dimensions|switch|liesIn|translate|snapTo|augment|Diagonal|trace|indexOf|diagonal|transpose|minor|row|isAntiparallelTo|ZY|YX|acos|RotationZ|RotationY|liesOn|RotationX|inv|rk|tr|det|toDiagonalMatrix|toUpperTriangular|version|XZ'.split('|'),0,{}))
/* ]]> */
</script>
<script type="text/javascript">
/* <![CDATA[ */
// glUtils, augment Sylvester some. Taken from learningwebgl. Possible author Vlad?
Matrix.Translation = function (v) {
	if (v.elements.length == 2) {
		var r = Matrix.I(3);
		r.elements[2][0] = v.elements[0];
		r.elements[2][1] = v.elements[1];
		return r;
	}

	if (v.elements.length == 3) {
		var r = Matrix.I(4);
		r.elements[0][3] = v.elements[0];
		r.elements[1][3] = v.elements[1];
		r.elements[2][3] = v.elements[2];
		return r;
	}

	throw "Invalid length for Translation";
}

Matrix.prototype.flatten = function () {
	var result = [];
	if (this.elements.length == 0)
		return [];


	for (var j = 0; j < this.elements[0].length; j++)
		for (var i = 0; i < this.elements.length; i++)
			result.push(this.elements[i][j]);
	return result;
}

Matrix.prototype.ensure4x4 = function() {
	if (this.elements.length == 4 &&
		this.elements[0].length == 4)
		return this;

	if (this.elements.length > 4 ||
		this.elements[0].length > 4)
		return null;

	for (var i = 0; i < this.elements.length; i++) {
		for (var j = this.elements[i].length; j < 4; j++) {
			if (i == j)
				this.elements[i].push(1);
			else
				this.elements[i].push(0);
		}
	}

	for (var i = this.elements.length; i < 4; i++) {
		if (i == 0)
			this.elements.push([1, 0, 0, 0]);
		else if (i == 1)
			this.elements.push([0, 1, 0, 0]);
		else if (i == 2)
			this.elements.push([0, 0, 1, 0]);
		else if (i == 3)
			this.elements.push([0, 0, 0, 1]);
	}

	return this;
};

Matrix.prototype.make3x3 = function() {
	if (this.elements.length != 4 || this.elements[0].length != 4)
		return null;

	return Matrix.create([[this.elements[0][0], this.elements[0][1], this.elements[0][2]],
				[this.elements[1][0], this.elements[1][1], this.elements[1][2]],
				[this.elements[2][0], this.elements[2][1], this.elements[2][2]]]);
};

Vector.prototype.flatten = function () {
	return this.elements;
};


//
// gluLookAt
//
function makeLookAt(ex, ey, ez, cx, cy, cz,	ux, uy, uz) {
	var eye = $V([ex, ey, ez]);
	var center = $V([cx, cy, cz]);
	var up = $V([ux, uy, uz]);

	var mag;

	var z = eye.subtract(center).toUnitVector();
	var x = up.cross(z).toUnitVector();
	var y = z.cross(x).toUnitVector();

	var m = $M([[x.e(1), x.e(2), x.e(3), 0],
				[y.e(1), y.e(2), y.e(3), 0],
				[z.e(1), z.e(2), z.e(3), 0],
				[0, 0, 0, 1]]);

	var t = $M([[1, 0, 0, -ex],
				[0, 1, 0, -ey],
				[0, 0, 1, -ez],
				[0, 0, 0, 1]]);
	return m.x(t);
}

//
// gluPerspective
//
function makePerspective(fovy, aspect, znear, zfar) {
	var ymax = znear * Math.tan(fovy * Math.PI / 360.0);
	var ymin = -ymax;
	var xmin = ymin * aspect;
	var xmax = ymax * aspect;

	return makeFrustum(xmin, xmax, ymin, ymax, znear, zfar);
}

//
// glFrustum
//
function makeFrustum(left, right, bottom, top, znear, zfar) {
	var X = 2*znear/(right-left);
	var Y = 2*znear/(top-bottom);
	var A = (right+left)/(right-left);
	var B = (top+bottom)/(top-bottom);
	var C = -(zfar+znear)/(zfar-znear);
	var D = -2*zfar*znear/(zfar-znear);

	return $M([[X, 0, A, 0],
			[0, Y, B, 0],
			[0, 0, C, D],
			[0, 0, -1, 0]]);
}

//
// glOrtho
//
function makeOrtho(left, right, bottom, top, znear, zfar) {
	var tx = - (right + left) / (right - left);
	var ty = - (top + bottom) / (top - bottom);
	var tz = - (zfar + znear) / (zfar - znear);

	return $M([[2 / (right - left), 0, 0, tx],
			[0, 2 / (top - bottom), 0, ty],
			[0, 0, -2 / (zfar - znear), tz],
			[0, 0, 0, 1]]);
}
/* ]]> */
</script>
<script id="shader-fs" type="x-shader/x-fragment">
#ifdef GL_ES
precision highp float;
#endif

varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void) {
gl_FragColor = texture2D(uSampler, vec2(vTextureCoord.s, vTextureCoord.t));
}
</script>
<script id="shader-vs" type="x-shader/x-vertex">
attribute vec3 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat4 uMVMatrix;
uniform mat4 uPMatrix;

varying vec2 vTextureCoord;

void main(void) {
gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);
vTextureCoord = aTextureCoord;
}
</script>
<script type="text/javascript">
/* <![CDATA[ */

	var gl;
	function initGL(canvas) {
		try {
			gl = canvas.getContext("experimental-webgl");
			gl.viewportWidth = canvas.width;
			gl.viewportHeight = canvas.height;
		} catch(e) {
			// promote this to a higher level than log
			console.log("Could not initialise WebGL, sorry :-(");
		}
		if (!gl)
			return null;
		return gl;
	}


	function getShader(gl, id) {
		var shaderScript = document.getElementById(id);
		if (!shaderScript)
			return null;

		var str = "";
		var k = shaderScript.firstChild;
		while (k) {
			if (k.nodeType == 3) {
				str += k.textContent;
			}
			k = k.nextSibling;
		}

		var shader;
		if (shaderScript.type == "x-shader/x-fragment") {
			shader = gl.createShader(gl.FRAGMENT_SHADER);
		} else if (shaderScript.type == "x-shader/x-vertex") {
			shader = gl.createShader(gl.VERTEX_SHADER);
		} else {
			return null;
		}

		gl.shaderSource(shader, str);
		gl.compileShader(shader);

		if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {
			console.log(gl.getShaderInfoLog(shader));
			return null;
		}

		return shader;
	}


	var shaderProgram;
	function initShaders() {
		var fragmentShader = getShader(gl, "shader-fs");
		var vertexShader = getShader(gl, "shader-vs");

		shaderProgram = gl.createProgram();
		gl.attachShader(shaderProgram, vertexShader);
		gl.attachShader(shaderProgram, fragmentShader);
		gl.linkProgram(shaderProgram);

		if (!gl.getProgramParameter(shaderProgram, gl.LINK_STATUS)) {
			console.log("Could not initialise shaders");
		}

		gl.useProgram(shaderProgram);

		shaderProgram.vertexPositionAttribute = gl.getAttribLocation(shaderProgram, "aVertexPosition");
		gl.enableVertexAttribArray(shaderProgram.vertexPositionAttribute);

		shaderProgram.textureCoordAttribute = gl.getAttribLocation(shaderProgram, "aTextureCoord");
		gl.enableVertexAttribArray(shaderProgram.textureCoordAttribute);

		shaderProgram.pMatrixUniform = gl.getUniformLocation(shaderProgram, "uPMatrix");
		shaderProgram.mvMatrixUniform = gl.getUniformLocation(shaderProgram, "uMVMatrix");
		shaderProgram.samplerUniform = gl.getUniformLocation(shaderProgram, "uSampler");

	}

	/*
	 * TODO: convert this to glMatrix instead, its quicker and better organised.
	 */


	var mvMatrix;
	var mvMatrixStack = [];

	function mvPushMatrix(m) {
		if (m) {
			mvMatrixStack.push(m.dup());
			mvMatrix = m.dup();
		} else {
			mvMatrixStack.push(mvMatrix.dup());
		}
	}

	function mvPopMatrix() {
		if (mvMatrixStack.length == 0) {
			throw "Invalid popMatrix!";
		}
		mvMatrix = mvMatrixStack.pop();
		return mvMatrix;
	}

	function loadIdentity() {
		mvMatrix = Matrix.I(4);
	}

	function multMatrix(m) {
		mvMatrix = mvMatrix.x(m);
	}

	function mvTranslate(v) {
		var m = Matrix.Translation($V([v[0], v[1], v[2]])).ensure4x4();
		multMatrix(m);
	}
	function mvTranslateNeg(v) {
		var m = Matrix.Translation($V([-v[0], -v[1], -v[2]])).ensure4x4();
		multMatrix(m);
	}
	function mvScale(v) {
		var m = Matrix.Diagonal([v[0], v[1], v[2], 1]);
		multMatrix(m);
	}
	function mvInvert() {
		mvMatrix = mvMatrix.inv();
	}

	function mvRotate(ang, v) {
		var arad = ang * Math.PI / 180.0;
		var m = Matrix.Rotation(arad, $V([v[0], v[1], v[2]])).ensure4x4();
		multMatrix(m);
	}
	function mvRotateAbout(ang, v, v2) {
		mvTranslate(v2);
		mvRotate(ang, v);
		mvTranslateNeg(v2);
	}

	var pMatrix;
	function perspective(fovy, aspect, znear, zfar) {
		pMatrix = makePerspective(fovy, aspect, znear, zfar);
	}

	function setMatrixUniforms() {
		gl.uniformMatrix4fv(shaderProgram.pMatrixUniform, false, new Float32Array(pMatrix.flatten()));
		gl.uniformMatrix4fv(shaderProgram.mvMatrixUniform, false, new Float32Array(mvMatrix.flatten()));
	}

	/*
	 * now our code starts
	 */
 

	/*
	 * helper function, just to reduce code size
	 */
	function makeCube(width, height, depth) {

		// we are passed in something like 8, 10, 12.
		// we convert these to floats, based around 8!
		var w = width / 8,
			h = height / 8,
			d = depth / 8;

		var buffer = gl.createBuffer();
		gl.bindBuffer(gl.ARRAY_BUFFER, buffer);
		vertices = [
			// Front face
			-w,-h, d, w,-h, d, w, h, d,-w, h, d,
			// Back face
			-w,-h,-d,-w, h,-d, w, h,-d, w,-h,-d,
			// Top face
			-w, h,-d,-w, h, d, w, h, d, w, h,-d,
			// Bottom face
			-w,-h,-d, w,-h,-d, w,-h, d,-w,-h, d,
			// Right face
			 w,-h,-d, w, h,-d, w, h, d, w,-h, d,
			// Left face
			-w,-h,-d,-w,-h, d,-w, h, d,-w, h,-d,
		];
		gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(vertices), gl.STATIC_DRAW);
		buffer.itemSize = 3;
		buffer.numItems = 24;
		return buffer;
	}


	var cubeVPB, bodyVPB, armVPB, legVPB;
	var headVTCB, headAccessVTCB, bodyVTCB, armLVTCB, legVTCB;
	var cubeVertexIndexBuffer;
	function initBuffers() {

		cubeVPB = makeCube( 8,  8, 8 );
		bodyVPB = makeCube( 8, 12, 4 );
		armVPB	= makeCube( 4, 12, 4 );
		legVPB	= makeCube( 4, 12, 4 );

		skintexture = gl.createTexture();

		// TODO for the following, what we could do to make it more readable/flexible,
		// is store it in ints for x/y, then divide by 64 or 32, depending.
		headVTCB = gl.createBuffer();
		gl.bindBuffer(gl.ARRAY_BUFFER, headVTCB);
		var textureCoords = [
			0.125,	0.5,	0.25,	0.5,	0.25,	0.75,	0.125,	0.75,
			0.5,	0.5,	0.5,	0.75,	0.375,	0.75,	0.375,	0.5,
			0.125,	1.0,	0.125,	0.75,	0.25,	0.75,	0.25,	1.0,
			0.25,	0.75,	0.375,	0.75,	0.375,	1.0,	0.25,	1.0,
			0.375,	0.5,	0.375,	0.75,	0.25,	0.75,	0.25,	0.5,
			0.0,	0.5,	0.125,	0.5,	0.125,	0.75,	0.0,	0.75,
		];
		gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(textureCoords), gl.STATIC_DRAW);
		headVTCB.itemSize = 2;
		headVTCB.numItems = 24;

		headAccessVTCB = gl.createBuffer();
		gl.bindBuffer(gl.ARRAY_BUFFER, headAccessVTCB);
		textureCoords = [
			0.625,	0.5,	0.75,	0.5,	0.75,	0.75,	0.625,	0.75,
			1.0,	0.5,	1.0,	0.75,	0.875,	0.75,	0.875,	0.5,
			0.625,	1.0,	0.625,	0.75,	0.75,	0.75,	0.75,	1.0,
			0.875,	1.0,	0.75,	1.0,	0.75,	0.75,	0.875,	0.75,
			0.875,	0.5,	0.875,	0.75,	0.75,	0.75,	0.75,	0.5,
			0.5,	0.5,	0.625,	0.5,	0.625,	0.75,	0.5,	0.75,
		];
		gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(textureCoords), gl.STATIC_DRAW);
		headAccessVTCB.itemSize = 2;
		headAccessVTCB.numItems = 24;

		bodyVTCB = gl.createBuffer();
		gl.bindBuffer(gl.ARRAY_BUFFER, bodyVTCB);
		textureCoords = [
			0.3125,	0.0,	0.4375,	0.0,	0.4375,	0.375,	0.3125,	0.375,
			0.625,	0.0,	0.625,	0.375,	0.5,	0.375,	0.5,	0.0,
			0.3125,	0.5,	0.3125,	0.375,	0.4375,	0.375,	0.4375,	0.5,
			0.5625,	0.5,	0.4375,	0.5,	0.4375,	0.375,	0.5625,	0.375,
			0.5,	0.0,	0.5,	0.375,	0.4375,	0.375,	0.4375,	0.0,
			0.25,	0.0,	0.3125,	0.0,	0.3125,	0.375,	0.25,	0.375,
		];
		gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(textureCoords), gl.STATIC_DRAW);
		bodyVTCB.itemSize = 2;
		bodyVTCB.numItems = 24;


		armLVTCB = gl.createBuffer();
		gl.bindBuffer(gl.ARRAY_BUFFER, armLVTCB);
		textureCoords = [
			0.6875,	0.0,	0.75,	0.0,	0.75,	0.375,	0.6875,	0.375,
			0.875,	0.0,	0.875,	0.375,	0.8125,	0.375,	0.8125,	0.0,
			0.6875,	0.5,	0.6875,	0.375,	0.75,	0.375,	0.75,	0.5,
			0.8125,	0.5,	0.75,	0.5,	0.75,	0.375,	0.8125,	0.375,
			0.8125,	0.0,	0.8125,	0.375,	0.75,	0.375,	0.75,	0.0,
			0.625,	0.0,	0.6875,	0.0,	0.6875,	0.375,	0.625,	0.375,
		];
		gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(textureCoords), gl.STATIC_DRAW);
		armLVTCB.itemSize = 2;
		armLVTCB.numItems = 24;


		legLVTCB = gl.createBuffer();
		gl.bindBuffer(gl.ARRAY_BUFFER, legLVTCB);
		textureCoords = [
			0.0625,	0.0,	0.125,	0.0,	0.125,	0.375,	0.0625,	0.375,
			0.25,	0.0,	0.25,	0.375,	0.1875,	0.375,	0.1875,	0.0,
			0.0625,	0.5,	0.0625,	0.375,	0.125,	0.375,	0.125,	0.5,
			0.1875,	0.5,	0.125,	0.5,	0.125,	0.375,	0.1875,	0.375,
			0.1875,	0.0,	0.1875,	0.375,	0.125,	0.375,	0.125,	0.0,
			0.0,	0.0,	0.0625,	0.0,	0.0625,	0.375,	0.0,	0.375,
		];
		gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(textureCoords), gl.STATIC_DRAW);
		legLVTCB.itemSize = 2;
		legLVTCB.numItems = 24;

		cubeVertexIndexBuffer = gl.createBuffer();
		gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, cubeVertexIndexBuffer);
		var cubeVertexIndices = [
			0,	1,	2,	0,	2,	3,	// Front face
			4,	5,	6,	4,	6,	7,	// Back face
			8,	9,	10,	8,	10,	11,	// Top face
			12,	13,	14,	12,	14,	15,	// Bottom face
			16,	17,	18,	16,	18,	19,	// Right face
			20,	21,	22,	20,	22,	23	// Left face
		]
		gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, new Uint16Array(cubeVertexIndices), gl.STATIC_DRAW);
		cubeVertexIndexBuffer.itemSize = 1;
		cubeVertexIndexBuffer.numItems = 36;
	}

	function updateTexture() {

		if (!loadedImage)
			false;
		loadedTexture = false;
		gl.bindTexture(gl.TEXTURE_2D, skintexture);
		gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, true);
		var texels;
		skineditormc.save();
		try {
			try {
				texels = skineditormc.getImageData(0, 0, 64, 32);
			} catch(e) {
				// if we, as the user, have asked for a file, we expect to be able to use it
				// this hits for file:/// and probably other content.
				// TODO: no idea what to do for !Gecko here
				netscape ? netscape.security.PrivilegeManager.enablePrivilege("UniversalBrowserRead") : true;
				texels = skineditormc.getImageData(0, 0, 64, 32);
			}
		} catch(e) {
			console.log("unable to access image data: " + e);
		}
		skineditormc.restore();
		gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, texels);
		gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);
		gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);
		gl.bindTexture(gl.TEXTURE_2D, null);
		loadedTexture = true;
	}

	// Sync localStorage
	// XXX: assume localStorage and not sessionStorage changed. why would it?
	function updateSkinsFromAnotherTime(key) {

		// ERM. GREAT. so if the update is atomic,
		// we get spammed with updates for each item? :|

		// assume here that values have updated in another window
		// since it was fired, we know at least 1, it is supported, so ignore try{}?
		// ignorantly overwrite, for now

		console.log( 'storage: another instance updated key ‘' + key + '’' );

		if (key == 'skins')
			skins = JSON.parse(localStorage.getItem('skins'));
		else if (key = 'lastSkin')
			lastSkin = JSON.parse(localStorage.getItem('lastSkin'));

		updateSkins(false); // This will do more JSON parsing 
	}

	/*
	* atm, we call this if we modify skins[]
	*/
	function updateSkins(refreshLocal) {

		if (!fCanvasSupport)
			return;

		console.log('Store the updated skins.');
		// we want this to update the list of Skins stored, to easier allow the user to pop
		if (refreshLocal) {
			try {
				localStorage['skins']		= JSON.stringify(skins);
				localStorage['lastSkin']	= JSON.stringify(lastSkin);
			} catch (e) {
				console.log('failed to store skins ' + e);
			}
		}

		// we have to iterate over the object, make sure we get arrays, check for:
		// .data, .thumb, .name
		// then push some thumbnails!

		holder.removeChild( skinsholder );
		// remove previous
		if ( skinsholder.hasChildNodes() ) {
			while ( skinsholder.childNodes.length >= 1 )
			{
				skinsholder.removeChild( skinsholder.firstChild );			 
			} 
		}
		holder.appendChild( skinsholder );

		// iterate and add skins to GUI!
		for (obj in skins) {
			obj = skins[obj];
			if (obj.thumb != null) {

				var temp = document.createElement('div');
				skinsholder.appendChild(temp);
				var name = document.createElement('p');
				var preview = document.createElement('img');
				temp.appendChild(name);
				temp.appendChild(preview);
				temp.className = 'box'; // TODO DOMy method please.
				preview.addEventListener('click', function() { loadSkinInSkins( this.skin ); }, true);
				name.addEventListener('click', function() { renameSkinInSkins( this.skin ); }, true);
				preview.src = obj.thumb;
				name.innerHTML = obj.name;
				preview.title = preview.skin = name.skin = obj.name;
				temp.className = 'box';
			}
		}

	}


	function renameSkinInSkins( skin ) {

		if (skin == "") 
			return;

		console.log('Renaming ‘' + skin + '’ skin.');

		skinName = prompt('What do you wish to rename ‘' + skin + "’ to?\nTo delete, rename to ''.", skin);
		
		if (skinName === null) { // user aborted
			return;
		} else if (skinName === "") { // user wants to delete
			console.log('Deleting ‘' + skin + '’ skin.');
			deleteSkinInSkins(skin);
		} else {
			skins[skinName] = skins[skin];
			skins[skinName].name = skinName;
			delete skins[skin];
			updateSkins(true);
		}
	}

	function loadSkinInSkins(skin) { 

		if (skin == "") {
			// TODO with new interface, you cant get here. remove?
			var skinName = prompt('Which skin do you want to load?', lastSkin);
		
			if (skinName == null) { // user aborted
				skinName = lastSkin
				return;
			}
		} else {
			skinName = skin;
		}
		console.log('Loading ‘' + skinName + '’ skin.');

		if (skins[skinName]) {

			// so when we go to save, use correct name.
			// and store latest?
			lastSkin = skinName;
			localStorage['lastSkin'] = JSON.stringify(lastSkin);
			
			var newskin = document.createElement('img');
			newskin.onload = loadNewSkin;
			newskin.width=64; newskin.height=32;
			newskin.src = skins[skinName].data;
		} else {
			console.log( skinName + " does not exist" );
		}
	}

	function resetLocalStorage() {

		console.log('Purging localStorage');

		if (localStorage && localStorage.clear)
			localStorage.clear();
		else {
			localStorage = {};
		}
		skins = initialSkins.clone();
		lastSkin = new String(initialLastSkin);

		updateSkins(true);
	}

	function deleteSkinInSkins(skin) {

		if (skin) {
			skins[skin] = {}
			delete skins[skin];
			if (skin == lastSkin) {
				// pick a decent replacement?
				lastSkin = 'default'; // XXX this can fail if the user deletes us
			}
			updateSkins(true);
		}
	}

	function resetSkin(e) {
		// if we are here, user has pressed ‘start again’
		// do we have changes?
		// load previously opened skin
		loadSkinInSkins( lastSkin );
	}

	function saveSkinToMinecraft(e) {

		try {
			/* FormData is new for Firefox 4, Chrome #, find something older */
			var fd = new FormData();
			fd.append("generator", "jd.name/mcse");
			fd.append("image", skineditorm.toDataURL('image/png'));

			var xhr = new XMLHttpRequest();
			// xhr.onreadystatechange = func() {}
// TODO: fake it for clients that cant do FormData?
//Content-Type: multipart/form-data;boundary=<boundary string>
//Content-Length: <length>
//--<boundary string>
//Content-Disposition: form-data, name="<input element name>"
//
//<input element value>
//--<boundary string>
//Content-Disposition: form-data, name=<input element name>"; filename="<input element value>"
//Content-Type: application/octet-stream
//
//<element body>
			// xhr.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
			xhr.open("POST", "http://www.minecraft.net/skin/upload.jsp"); 
			xhr.send(fd);

		} catch (e) {
			console.log('A problem has occured, Mojang returned a creeper.');
		}
		// upon getting confirmation, load another tab?
	}

	function openPushSkinDialog(e) {
		// all this really needs to do is animate‐in the ‘I think i’m ready’ dialogue
	}

	function saveSkinToDisk(e) {
		skinimporterchrome.click();
	}

	function saveSkinInSkinsButton(e) {
		saveSkinInSkins("");
		e.preventDefault();
		return false;
	}

	function saveSkinInSkins(skin) {

		if (skin == "") {
			var skinName = prompt('Please name your skin: ', lastSkin);
			if (skinName == null) {
				skinName = lastSkin
				return;
			}
		} else
			skinName = skin;

		console.log('Saving ‘' + skinName + '’ skin.');
		var sthumbnail, sskin;
		if (fWebGLSupport) {

			var skinthumb = document.createElement('canvas');
			skinthumb.width=70; skinthumb.height=100;
			skinthumbc = skinthumb.getContext('2d');
			skinthumbc.drawImage(skinpreview, 0, 0, 70, 100);
			try {
				try {
					sthumbnail = skinthumb.toDataURL();
				} catch(e) {
					netscape ? netscape.security.PrivilegeManager.enablePrivilege("UniversalBrowserRead") : true;
					sthumbnail = skinthumb.toDataURL();
				}
			} catch(e) {
				console.log("unable to access image data: " + e);
			}
		} else {
			// TODO build a front‐only drawing of the avatar
			sthumbnail = initialSkins['default'].thumb;
		}

		try {
			try {
				sskin = skineditorm.toDataURL()
			} catch(e) {
				netscape ? netscape.security.PrivilegeManager.enablePrivilege("UniversalBrowserRead") : true;
				sskin = skineditorm.toDataURL()
			}
		} catch(e) {
			console.log("unable to access image data: " + e);
		}

		// TODO: for now, overwrite is default
		skins[skinName] = {
			name: skinName,
			data: sskin,
			thumb: sthumbnail,
		}
		lastSkin = skinName;
		updateSkins(true);
	}

	/*
	 * helper function
	 * replace this will inline code & a loop instead.
	 * ie, avoid function call
	 */
	function drawAndTexture(vertices, texture) {
		gl.bindBuffer(gl.ARRAY_BUFFER, vertices);
		gl.vertexAttribPointer(shaderProgram.vertexPositionAttribute, vertices.itemSize, gl.FLOAT, false, 0, 0);
		gl.bindBuffer(gl.ARRAY_BUFFER, texture);
		gl.vertexAttribPointer(shaderProgram.textureCoordAttribute, texture.itemSize, gl.FLOAT, false, 0, 0);
		gl.activeTexture(gl.TEXTURE0);
		gl.bindTexture(gl.TEXTURE_2D, skintexture);
		gl.uniform1i(shaderProgram.samplerUniform, 0);
		gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, cubeVertexIndexBuffer);
		setMatrixUniforms();
		gl.drawElements(gl.TRIANGLES, cubeVertexIndexBuffer.numItems, gl.UNSIGNED_SHORT, 0);
	}

	var rxRArm = 5, ryRArm = 0,
		rxLArm = 5, ryLArm = 0,
		ryRLeg = 3, ryLLeg =-3,
		rzHead = 0, ryHead = 0,
		rBody = 0;

	function drawScene() {

		if (!loadedTexture) {
			return;
		}

		gl.viewport(0, 0, gl.viewportWidth, gl.viewportHeight);
		gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);

		perspective(45, gl.viewportWidth / gl.viewportHeight, 0.1, 100.0);
		loadIdentity();

		// move to the plain we want
		mvTranslate([0.0, 0.5, -13.0])

		// we rotate everything
		// TODO do we still want this?
		mvRotate(rBody, [0, 1, 0]);

		// draw body
		mvPushMatrix();
			drawAndTexture(bodyVPB, bodyVTCB);
		mvPopMatrix();

		// arms
		mvPushMatrix();
			mvTranslate([-1.5, 0.0, 0.0]);
			mvRotateAbout(ryRArm, [1, 0, 0], [-0.5, 1.5, 0]);
			mvRotateAbout(-rxRArm, [0, 0, 1], [-0.5, 1.25, 0]);
			drawAndTexture(armVPB, armLVTCB);
		mvPopMatrix();
		mvPushMatrix();
			mvTranslate([1.5, 0.0, 0.0]);
			mvRotateAbout(ryLArm, [1, 0, 0], [-0.5, 1.25, 0]);
			mvRotateAbout(rxLArm, [0, 0, 1], [-0.5, 1.25, 0]);
			mvScale([-1.0,1.0,1.0]);
			drawAndTexture(armVPB, armLVTCB);
		mvPopMatrix();

		// legs
		mvPushMatrix();
			mvTranslate([-0.5, -3, 0.0]);
			mvRotateAbout(ryRLeg, [1, 0, 0], [0, 1.5, 0]);
			drawAndTexture(legVPB, legLVTCB);
		mvPopMatrix();
		mvPushMatrix();
			mvTranslate([0.5, -3, 0.0]);
			mvRotateAbout(ryLLeg, [1, 0, 0], [0, 1.5, 0]);
			mvScale([-1.0,1.0,1.0]);
			drawAndTexture(legVPB, legLVTCB);
		mvPopMatrix();

		// draw head
		mvPushMatrix();
			mvTranslate([0.0, 2.6, 0]);
			mvRotateAbout(rzHead, [0, 1, 0], [0, -1.0, 0]); 
			mvRotateAbout(ryHead, [1, 0, 0], [0, -1.0, 0]);
			drawAndTexture(cubeVPB, headVTCB);
			// 1.125 puts it as 9,9,9
			mvScale([1.125,1.125,1.125]);
			drawAndTexture(cubeVPB, headAccessVTCB);
		mvPopMatrix();
	}

	/* ################################## */

	var lastTime = 0;
	function animateScene() {

		// TODO replace with actual animation code
		var timeNow = new Date().getTime();
		if (lastTime != 0) {
			var elapsed = timeNow - lastTime;

		}
		lastTime = timeNow;
	}

	function startRotatingDude(e) {

		if (!fWebGLSupport)
			return;
		pauseAnimation();
		canRotate = true;
		skinpreview.style.cursor='move';

		if (!e) e = window.event;
		cursorThen = [e.clientX, e.clientY];
		// TODO maybe we can scope the mouse click to decide whether we do legs, head, arms, body?
	}
	function stopRotatingDude() {

		if (!fWebGLSupport)
			return;
		resumeAnimation();
		canRotate = false;
		skinpreview.style.cursor='pointer';
	}

	function captureCursorLocation(e) {
		if (!canRotate)
			return;
		if (!e) e = window.event;

		cursorNow = [e.clientX, e.clientY];
		cursorDiffX = cursorThen[0] - cursorNow[0];
		cursorDiffY = cursorThen[1] - cursorNow[1];
		cursorThen = cursorNow;

		rBody -= ( cursorDiffX );
		ryHead -= ( cursorDiffY );
	}

	/* logic:
			* Animate guy always.
			: User starts drawing → reduce scene redraws, set timer for scene update
			  Timer triggers to resume animation, stop scene update, resume scene redraw
			: Rotate guy → Pause ‘animation’ of dude, [2 minutes?], allow user to rotate
	*/

	function toggleAnimation() {

		if (!fWebGLSupport)
			return;
		canAnimate = !canAnimate;
		if (!canAnimate)
			resumeAnimation();
		else
			pauseAnimation()
	}

	function pauseAnimation(){
		canAnimate = false;
		clearInterval(timerAnimation);
	}
	function resumeAnimation() {
		canAnimate = true;
		clearTimeout(timerDrawingComplete);
		timerAnimation = setInterval(animateScene, 50);
	}

	// to control redraws
	function reduceSceneDrawing() {
		clearInterval(timerDrawingScene);
		timerDrawingScene = setInterval(drawScene, 250);
	}
	function resumeSceneDrawing() {
		clearInterval(timerDrawingScene);
		timerDrawingScene = setInterval(drawScene, 50);
	}
	// to control texture updates
	function startSceneUpdates() {
		clearInterval(timerUpdateScene); // incase
		if (fWebGLSupport)
			timerUpdateScene = setInterval(updateTexture, 200);
	}
	function stopSceneUpdates() {
		clearInterval(timerUpdateScene);
	}

	function drawingComplete() {
		stopSceneUpdates();
		resumeSceneDrawing();
		resumeAnimation();
		timerDrawingComplete = false; // TODO needed?
	}

	function drawOnDude(ev) {
		var x, y;
		
		// to prevent constantly blocking updates
		if (fWebGLSupport) {
			if (!timerDrawingComplete) {
				pauseAnimation();
				reduceSceneDrawing(); // do we need?
				startSceneUpdates();
				timerDrawingComplete = setTimeout(drawingComplete, 1000);
			}
		}

		if (!ev) ev = window.event;
	
		// Get the mouse position relative to the canvas element.
		if (ev.layerX || ev.layerX == 0) { // Firefox
			x = ev.layerX; y = ev.layerY;
		} else if (ev.offsetX || ev.offsetX == 0) { // Opera
			x = ev.offsetX; y = ev.offsetY;
		}

		// remove border, clamp to 64×32
		x -=3; y -=3;
		x -= x%8; y -= y%8;

		// What mode are we in?
		if (paintMode == ERASE) {
			skineditormc.clearRect( x/8, y/8, 1, 1);
			skineditorc.clearRect( x, y, 8, 8);
		} else if (paintMode == PAINT) {
			skineditormc.save();
			skineditormc.fillStyle = paintColour;
			skineditormc.fillRect( x/8, y/8, 1, 1);
			skineditormc.restore();
			skineditorc.save();
			skineditorc.fillStyle = paintColour;
			skineditorc.fillRect( x, y, 8, 8);
			skineditorc.restore();
		} else if (paintMode == DROPPER) {
			// 
		} else {
			// future proof?
		}
	}

	/* ################################## */

	function loadSkinFromFile(e) {

		console.log('loadSkinFromFile called.');
		//
		if (skinimporterchrome.files) {
			var oF = skinimporterchrome.files[0];
			console.log('Loading skin from file ‘' + oF.name + '’ using FileAPI.');
			var newskin = document.createElement('img');
			newskin.onload = loadNewSkin;
			newskin.file = oF;

			// For Chrome that doesn’t wont to load via .file 
			var reader = new FileReader();
			reader.readAsDataURL(oF);
			reader.onload = (function(aImg, read) { return function(e) { console.log('Loaded image'); aImg.src = e.target.result; }; })(newskin, reader);
			reader.onerror = function(){ console.log('Failed to load. TODO: verbosity'); }

		} else {
			// We are positively in a non‐HTML5 browser. Firefox 3.6?
			console.log('Loading skin from file ‘' + skinimporterchrome.value + '’.');
			var newskin = document.createElement('img');
			newskin.onload = loadNewSkin;
			newskin.src = skinimporterchrome.value;
		}
		e.preventDefault();
		return false;
	}

	function roundNumber(num, dec) {
		return Math.round( Math.round( num * Math.pow( 10, dec + 1 ) ) / Math.pow( 10, 1 ) ) / Math.pow(10,dec);
	}

	/* our data: URL image loader function */
	function loadNewSkin() {

		if (!fCanvasSupport)
			return;

		skineditormc.save();
		skineditormc.clearRect(0,0,64,32);
		skineditormc.drawImage( this, 0, 0, 64, 32 );
		skineditormc.restore();

		skineditorc.clearRect(0,0,512,256);

		if ( skineditorc.mozImageSmoothingEnabled ) {
			// if we are mozilla, tell them to stop SMOOTHING OUR SHIT
			skineditorc.mozImageSmoothingEnabled ? skineditorc.mozImageSmoothingEnabled = false : true;
			skineditorc.drawImage( this, 0, 0, 512, 256 );
		} else {
			// we *arent* Gecko. assume, for now, that thats everything that can do what we need
			// XXX we need to toggle on Opera/Chrome to do a more expensive 
			console.log('Working around a flaw in your browser engine, initial load will be slower than Firefox.');

			skineditorc.save();
			var pixels = skineditormc.getImageData(0, 0, 64, 32);
			pixels = pixels.data; // apparently, detaching = quicker
			for (var x = 0; x<=64; x++ ) {
				for (var y = 0; y<=32; y++ ) {

					/* XXX avoid doing work for empty pixels */
					if ( pixels[((y *(pixels.width*4)) + (x*4)) + 3] != 0 ) {

						skineditorc.fillStyle = 'rgba(' +	pixels[((y *(pixels.width*4)) + (x*4))] + ',' + 
														pixels[((y *(pixels.width*4)) + (x*4)) + 1] + ','+
														pixels[((y *(pixels.width*4)) + (x*4)) + 2] + ','+
														pixels[((y *(pixels.width*4)) + (x*4)) + 3] + ')';
						skineditorc.fillRect(x*8, y*8, 8, 8);
					}
				}
			}
			skineditorc.restore();
		}
		loadedImage = true;

		if (fWebGLSupport) {
			updateTexture();
		}
	}


	/* because JS lacks it */
	/* http://my.opera.com/GreyWyvern/blog/show.dml/1725165 */
	Object.prototype.clone = function() {
		var newObj = (this instanceof Array) ? [] : {};
		for (i in this) {
			if (i == 'clone')
				continue;
			if (this[i] && typeof this[i] == "object") {
				newObj[i] = this[i].clone();
			} else 
				newObj[i] = this[i]
		}
		return newObj;
	};


	var skinpreview, 	// our WebGL canvas
		skineditor,		// our drawing canvas
		skineditorc, 	// our drawing canvas context
		skinsholder;

	var ERASE = -1,		// Painting, awww!
		NONE = 0,
		PAINT = 1,
		DROPPER = 2;

	var paintMode = NONE,
		paintColour = '#fff';

	var skins = {},			// our storage pool for drawings
		initialSkins = {},
		lastSkin,			// our default skin to open
		initialLastSkin;

	var loadedImage = false, // delay 3D scene if canvas is slow.
		loadedTexture = false,
		skintexture;

	var	cursorThen = [0,0],
		cursorNow = [0,0];

	var canAnimate,
		canRotate,
		canReset,			// LOL, this was to prevent pressing reset. but it was a nag
		timerDrawingComplete,
		timerAnimation,
		timerDrawingScene,
		timerUpdateScene;

	// features we want to use, test for ’em
	var fDataUrlSupport 	= false,
		fJSONSupport		= false,
		fCanvasSupport 		= false,
		fWebGLSupport 		= false,
		flStorageSupport	= false;

	var skinimporterchrome;

	/*
	 * Boot our editor
	 */
	function init() {

		// Why don’t we use a large library like modernisr?
		// Well, we have a few features to test. Beyond that, we are already pushing
		// 64k before I’ve tidied. No sense making it bigger than it needs to be.

		// remove our noscript block
		warning = document.getElementById( 'noscript' );
		warning.className = 'disabled';
		if (warning.parentElement)
			warning.parentElement.removeChild(warning);
		delete warning;

		// discover console and fake up a work‐around
		if (typeof console == 'undefined') {
			console = {}
			console.log = function(message) {
				// alert(message);
			}
		}
		// push messages to Opera debug
		if (window.opera && opera.postError)
			console.log = opera.postError

		// discover if we are IE?
		if (true) {
			document.createElement('header');
			document.createElement('hgroup');
			document.createElement('nav');
			document.createElement('menu');
			document.createElement('section');
			document.createElement('article');
			document.createElement('aside');
			document.createElement('footer');
		}

		// default SKINS setup
		// TODO: make this an ‘initial’ blob, so that if localStorage is purged, we can restore
		skins = {};
		initialSkins = {};
		initialSkins['default'] = {
			name: 'default',
			data: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAgCAYAAACinX6EAAAE8klEQVRogeWX0U/bVhTG/UjtxCVVp0Z2YgqkxoEgh8JLglhIaYBOaNWImFo8NRVMkIYipAj2sAoFNgSESd2eIgWlmVSpUoQ29WHd9lCxxz3lf/r24FxzbeyYUlR31NInJ77HN/5+957jE4ZxOfrDfvSH/YgEO0B/jgQ70NXJYWNKbSu3+T/6gxhWu65C7bpqAhAJdmBjSkVhPI7d7Ihx3s2OXC4AxLwssI4AGIYxqTAevxwAyOpb04Bcu/QAaLOywEIWWFM6fBIA7My7AZhV5MsDgBiPhnyQBRZdndwpAHa6NACIcVpkZ/zvX4OKyEIRdVN9IodoyIfbvZ0YvKlLvenHgKTXASXEIRLsgCywGJB0ACTudm8noiEf+kQOsqDPqYgs3PoIr/2bAMgCi5jEIxryYUDyYzgSwIDkNzQcCeBO/zWk+j9DTOKhhDgjJhryISbxxjw0gHZ9hNf+mZjEQw7qq6Yb56GIHCJB1gDxV/kpjp8X8W9lC8c/FXH8fB2/fTePkVvXEA35EAmyUEQOAy14ssBCDnKISTzc+giv/es7QPBjMMzrqyrqqRCTeKg9ARxtLuHNziqONpfw+9YqasVv8LZcRO3JDGpPZqD2BBCTePSJHBRR30GDYR6K4IcisnDrI7z2b6SAngY+9N64gr0HSdQWM0gq1/FmZxUAMDtWxp/PlvG2XMTsWBkAcLS5hKRyHbXFDPYeJNF74wpkwQd6Trc+wmv/JwAEf2vbBrAzO4RKLo39+QRqi5P449kC/v6haLze/tl/ipeFKWxlR7A/n0All8bO7BBiUgBykDNWny6CTn2E1/4Zsu0HwzwWJlS8KNzH4eJd4w/NL48mUMmNI93tw8HMGA5mxpDp4fHzo8+xnU1gY0rFbnYEh4t38aJwHwsTqp4CrXRw6yO89s+Qf2/EdG15GpVcGgcPR7E+rWItE8PqRD/S3T7cCbPI9PDI9PD4cW4U3385jPVpFQcPR/Fr/h5qy9M4/PYL/dyaj4C09hEEnNf+Tx1f32uClqIoJrlO0Gw6N0XNJpjHj9vL7Wg09HmaTTCNBgrjcXw1dMs4fxQAnFrjCwFAzLf0aQNoNEzmW3/KvAfwIVPgvQHElSLiShFyt4a4UsRk8pVJ9Jh1PDlUBlMqnUjTwFSrYOp1bGcTeFmYwnY2ge1sAky9rouOL5X0a43GiV6/1kW+O8WTGOs4uZ/oLADkbu1cACaTr/Qfzed1lUonD96CYJgnD0TH5/Nm07TIPHQsMUjuIUCt4+cB4GTQFYDdA5KHrNf1HUGbpOPzeXvz9Bx2gOkYzwFo2skDaJr5xwkA+ppTPIlrNMyfrQbp3fShdgAdkxwqm2QYIapWzabJZ3KdjiUArKap+yu5tKG9uVEcbS6ZtDc3aoqxjp8LADFH7wBHALSZfN4MwM4YDYykgN09ra1uB6CyphkGyfULBfDONcAKgF59umLTAOgaYDFNA6HNWQFU1jRbAJU1zYg5EwBa7/0WcANgfQvYxToAsK6wFYBdilwIgHbjbYuQ9Q1gBWBXtCyizTkBaFcjXAGkUimkUilXACRuZWXFJMMQaUTI6llX3wkAHW9TD2hzdjlOA6BTgJzPDMDJoNs4nSJyt3YKoNExUgCsjZdRUEmaVKtGEXYCQEza7RDPANjtIBOEatW9ta5WTdesK2wqgGuabY14FwD/Ad2t413QljEOAAAAAElFTkSuQmCC',
			thumb: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEYAAABkCAYAAAA7Ska5AAADkUlEQVR4nO3Zz0vbYBjA8R5HnW4KwhDrnFSR6nClvdji/IXKQDysdIdtWHAwmTYIwe1gGcRN0GzgdioUxMNgIGPiwR87iB49+T89O8j79m36Jk017fs0fQrfw9Is75PP0jS6QIBeti+DkqZ8AKwpHwBrygfAmvIBsKZ8AKwpHwBrygfAmvIBsFb7RUZ6W4E11HPTyOMHvMHuFhjsboHwo3u8ga4gDHQF+f5DPa0QCRUjGIJxD/O096E/YMSTkxULt0Ms3A5TkQ7eeKQTxiOdMNzTxmOA9ZiZYLDAnJlZODOzcLGr867yBlzlDbj4rhfbXYeL3XX4++k1L97fAfH+DoIhmGaF+fP5PbBOtjQ42dJA3HZoaHBoaLCnv+WdmzqcmzrsfZgvi2D8DsMwTrY0YK+XYybvNLcMp7lljnFu6vw98cUgCYZgmhRm790ssI5zS3CcW4J/X3TeysSzsi53snC5k4VfK3M8IxUHIxUnGN/D/FycBlY+MwH5zARMPrnP+zY/VtZMXxvM9LXBj8XnvM3UKGymRgmGYJoVZm1mGFjadAS06UgJzFQoCFOhIMcQ+5pO8jYWYrCxECMY38N8nBsBLys5/vU18A4OiqGAEQcTBxWHLRRu2t/nsXsG+zpmfxYT9+dZ15CFCsYpL2EYtmwd766aO6K4HbQWMEdHxdg2cT/lMG4GlmUBkoKIx7Iek2CqgBG3KYVxGk5EczpBtg/7uBUK8hO1HpdgbGDE48quSKUw4iBuTsALGKcaAsZtMpjbHgsNTKWrohYwTmui/FZyGlI8abuTl70n+3uNAMN/D1vpX9ZjGPG/X+xCAePUdjrpDGN9Opa9J7zvZs2mhNlOJ8vWyK+94aGCkQ1WK5h8ZtKHMLJ7kfXZRfzq9yMM35aZ9BRmO520X4tgytdqmJsvG74WHyW7j21DwXh9xfgGJhAIGFIQNzCS/QjGrzAlA8qeY5x+xSDbxvavZl2CQQ5j9zwxm/gN1ZSImpCImhVhnB4sUcJYB6wnTMm9TRWM0xOoOKDXMLJ1mgLGCpSImq5g7no+nsG47bYwsuo0c31gXr24hko1JQxdMQRDMARDMARDMARDMARDMARTReJP1SxfwzidMMG4gKGPEt1jCIZgCIZgCIZgCIZgGhNmdXUVvIpgCIZgCKaWeARDMChTPgDWlA+ANeUDYE35AFhTPgDWlA+ANeUDYE35AFhTPgDK/gOLlYhBD0WfqAAAAABJRU5ErkJggg==',
		}
		initialSkins['honeydew'] = {
			name: 'honeydew',
			data: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAgCAYAAACinX6EAAADG0lEQVRogd1YO26kQBDlCg4mICCzLDn12KlTEvLdDYcT+Ba2z0BqiXCEJpjABARIHACJjMDyPeiNqlUUVf1zW7PrlkpjaLrp9/pV9cNJYmnloVSm+Ly7Usf9TnV5pj7vrvQ1/G2b/59vAPTPr9+rgPtdnongj/vdzyAAAGPw8AuA4bfLs5UiLr3+Lzdu9zERsNtUBT+GgKauVpLHKdHU1QZw7BRo6ko1dbWZR7ofvQEBmAS4bupKA/94e14FEBHj/RclwFYEOfAQXZ79/ylgOwYl8BCXXr+1caCaujKCjjWmPJTRpB2cEtyi5nHwBhIyhiNgHgc1j4M3kNBxSf74oGjM47C6vr25ZsM0xjWSJEnovPM4qNubaw1Gej/uhzFSvzg+ZNExw7QG0yZF63+5T5UUUMiKotgUN3zPNIctvCUbu1Hrukwn7eyW6aSW6aTSNN0YnjRNdT8Yn2U66WeoIaImCTtFaqW5DymXPjo/xii6VLo4AAH3AOAynVRRFKooitU9OpZzhjZCKHj6dcn5CeijxFKisCOFeVbX3O5zllby+/RllBQXn4CVgH+h0Z3lXCZcU5DejRYK27FFW5dnLNDjfqfyxwedNlLY5ueOUnxaBYGmBOAFSZVVarBT1BJ3eRaVgL49rwiAYzk6AdLZKjXTl+F3EhBVASYTZBvPVVvI3e9MgWAFSCahb8+qb89WI0MB4CJFq7rPPBCShbaty7VmiTbRNbhF41MBBywOagMF40qAi5KAhCACJPm7EkCPwuN+p9X08fa8Ate3Z/1OuE+f8QWPSfAmAMvHhQTp5SD/Ls80yL49b3YX5y+AwwS4pkpoTWHPfch/l1zjXvr++qQdJa4pGBglgKYCfTY0vBTAGR+bCmwSxHnP5TcmABfdGOC9CYiVAlQl0m6Wh1LPw6mBm8s3vAn4ShHkFmCSMnaLkhpC/svkY903KcCFiQBpDABzlSqnANP80RQgFUCfQiiBfn990gXRhQApHXxqEt0cKwF4YpPrkvqwjDEg/GnsQoAtHbjNcFGlcwrYCAg5BXxJkNQQogLAY8P/F6CbuIFTQdIoAAAAAElFTkSuQmCC',
			thumb: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEYAAABkCAYAAAA7Ska5AAACz0lEQVR4nO3bPXLbMBAFYF7BhQsW7DKZcRuPWrVseIn4BDmCO0/ukd6FCxVRwUJncJ/JPYxUK8OYBbAMQe+CeJp5DUeiFp8N4odU1+EVfT0ibNQLsBr1AqxGvQCrUS/AatQLsBr1AqxGvQCrUS/Aarb/kofvD650AAMYwNSA8rkwd1+/rM6uYMbjwY3HQxGY8XgATDMwpQIYwDQK8+fXk6NM0+SmaXL+sVTo/f5nAAOYRmHeXl8cpe971/e9+/vt5pp5HNw8Dh+O+aHP0DkA0xIM1/AcDGVXMBzAPA7Ox/KvI5QUJAUwLcFIu9Lz/e0+YXyc5/vba1LXmnkcou+dx2Ef15iue5/HlIAJ5zEbbmatb7hk1y3V2CUw4/FwPeflfHKX86kumLDoVIO5awy9x8eiRaT/HRtugW7/31IahksVMFzhkuE3F8AshHl7fWGBzMCECLmE3YbrSnStupxPyfMDJgNTcKdvHQzXXTRgOKBqYcLRyB+BCMO/dULHqoBZirE1jJ+qYH7//HENHaNuw10n/K5ESwvAtAQjHVEo/sb40vMCBjA7g/GHcult2BQGNzUwPcFLLfBKw0hSBcwSjFy3iZ3P/OpastpeA8MhVLHtEIaehCoFQ8/i5f4IqjDSvp6DWDLqSKEBYxkm9UBh173fQuEa6i8TwuVCbH6Se4ARMNZhuPgwXAPDpxi4JxtyMOa7UgxFA8bUcJ3qUlvCcF2oepgYUOyYBGZte4rBSCOB8Telwg3wgtcOWzCSeQdgEhCAYWCkv0DZFUyJn+QAJjI/AUyLMLlZMmCYBnPTem4TalcwkgYDJtJg7uFGP4XWQLZgJA0GDGD+H2bD2yI2YUqkORiMShiuAZMNlgSAWRbJ1qY0gAFMwzCSjW9pANMCDJYEgAEMYLQDGMBUHfUCrEa9AKtRL8Bq1AuwGvUCrEa9AKtRL8Bq1AuwGvUCTOYfXfp3gFneuucAAAAASUVORK5CYII=',
		}
		lastSkin = 'default';
		initialLastSkin = 'default';

		// discover if we have JSON library in the browser
		if ( typeof JSON != 'undefined' ) {
			fJSONSupport = true;
		} else {
			console.log('TODO: write thing. lols' );
		}

		// discover localStorage and enable if possible

		if ( typeof localStorage != 'undefined' ) {
			flStorageSupport = true;

			console.log('We have localStorage support.');
			if (localStorage['skins'] != null) {

				skins						= JSON.parse(localStorage['skins']);
				lastSkin					= JSON.parse(localStorage['lastSkin']);

			} else {

				skins = initialSkins.clone();
				lastSkin = new String(initialLastSkin);
				try {
					localStorage['skins']	= JSON.stringify(skins);
					localStorage['lastSkin']= JSON.stringify(lastSkin);
				} catch (e) {
					// OOM seems unlikely with our usage needs.
					console.log('Had a problem setting up localStorage: ' + e);
				}
			}

			// Safari requires you to define your event listener on the body; IE requires it to be set on the document. Firefox doesn’t care.
			// SERIOUSLY?! bugger Safari. maybe Chrome too.
			// IE: If we dont have this, wont have ‘storage’ (technically a lie, but that IE doesnt do canvas either…)
			if (document.addEventListener)
				document.addEventListener('storage', updateSkinsFromAnotherTime, false);

		} else {

			// we need to disable our ‘skins’ stuff, just do session editing
			localStorage = {};
			skins = initialSkins.clone();
			lastSkin = new String(initialLastSkin);
			localStorage['skins']	= JSON.stringify(skins);
			localStorage['lastSkin']= JSON.stringify(lastSkin);
		}

		// discover dataURL support and continue
		// XXX takes too long. Assumption: browsers that do canvas currently also support data:

		skineditor = document.getElementById( 'skin-editor' );
		skineditorm = document.getElementById( 'skin-editor-mini' );

		holder = document.getElementById('container');

		// discover canvas support and continue
		if (skineditor && skineditor.getContext) {

			fCanvasSupport = true;
			skineditor.className += ' enabled';
			skineditorc = skineditor.getContext( '2d' );
			skineditor.addEventListener('click',			drawOnDude, true);

			// TODO: turn this back into a <canvas> because we need it for
			// the save image option
			skineditorm.width = 64; skineditorm.height = 32;
			skineditormc = skineditorm.getContext( '2d' );

			// need to disable for file:// Opera & Chrome, they refuse to open files
			skinimporterchrome = document.createElement('input');
			holder.appendChild(skinimporterchrome);
			skinimporterchrome.id = 'skin-selector';
			skinimporterchrome.type = 'file';
			skinimporterchrome.accept = 'image/png'; // ask for PNG images
			skinimporterchrome.addEventListener('change',	 loadSkinFromFile, false);

			// even without data: URL support, we want this gutter to display
			skinsholder = document.createElement('div');
			holder.appendChild(skinsholder);
			skinsholder.id='skins-container';
			skinsholder.className = 'box';

			/*
			 * convert everything below either: into pure JS, or keep as HTML and fix display w/o JS
			 */

			var temp = document.getElementById( 'saveSkin' );
			temp.addEventListener('click',		saveSkinInSkinsButton, false);
			temp = document.getElementById( 'resetSkin' );
			temp.addEventListener('click',					resetSkin, false);
			temp = document.getElementById( 'submitmojang' );
			temp.addEventListener('click',		  saveSkinToMinecraft, false);
			temp = document.getElementById( 'openFile' );
			temp.addEventListener('click',			   saveSkinToDisk, false);
			temp = document.getElementById( 'pushSkin' );
			temp.addEventListener('click',		   openPushSkinDialog, false);

			// now, for the EDITING!
			palette = document.createElement('div');
			pTitle  = document.createElement('p');
			palette.appendChild(pTitle);
			pTitle.innerHTML = 'Palette';
			holder.appendChild(palette);
			palette.id='colourpalette';

			// TODO dropper?
			// now build default colours, C64 has a nice mellow palette… :
			pColours = { 'erase': 'erase', '#000000': 'black', '#FFFFFF': 'white', '#883932': 'red', '#67B6BD': 'cyan',
						 '#8B3F96': 'purple', '#55A049': 'green', '#40318D': 'blue', '#BFCE72': 'yellow',
						 '#8B5429': 'orange', '#574200': 'brown', '#B86962': 'light red',
						 '#505050': 'dark grey', '#787878': 'grey', '#94E089': 'light green',
						 '#7869C4': 'light blue', '#9F9F9F': 'light grey' };
			for (colour in pColours) {
				if (colour == 'clone')
					continue;
				var temp = document.createElement('span');
				palette.appendChild(temp);
				temp.id = pColours[colour]; // XXX oops?
				temp.title = temp.id;
				temp.style.backgroundColor = colour;
				if (colour == 'erase')
					temp.addEventListener('click', 
						function() { paintMode = ERASE; paintColour = 'rgba(0,0,0,0)'; skineditor.className = 'enabled erasing'; }, true);
				else
					temp.addEventListener('click', 
						(function(col) {
							return function() { paintMode = PAINT; paintColour = col; skineditor.className = 'enabled painting'; }; })(colour),
						true);
			}

		} else {
			// We don’t have to do anything here, because we have fallback in HTML
		}

		skinpreview = document.getElementById( 'skin-preview' );

		// discover WebGL support and continue
		if (skinpreview && initGL( skinpreview ) != null) {

			fWebGLSupport = true;
			skinpreview.className += ' enabled';
			webGLStart();
		
			skinpreview.addEventListener('mousedown',		startRotatingDude, true);
			skinpreview.addEventListener('doubleclick',		toggleAnimation, true);
			skinpreview.addEventListener('mouseup',			stopRotatingDude, true);
			skinpreview.addEventListener('mouseout',		stopRotatingDude, true);
			// TODO Stewart suggested to put this on document, so you can leave the preview and still drag.
			// need to verify that mouseup on document wouldnt break anything
			skinpreview.addEventListener('mousemove',		captureCursorLocation, true);

		} else if (fCanvasSupport) {

			// TODO *could* do some canvas‐generated perspective fallback here
			// Be cheeky, swap out the missing webgl support with the existing fallback image.
			// This should run for Opera, Firefox, Chrome without WebGL support
			var temp = document.createElement('div');
			holder.replaceChild(temp, skinpreview);

			temp.id = 'skin-preview';
			temp.width = '350px'; temp.height = '500px';
			if ( skinpreview.hasChildNodes() ) {
				while ( skinpreview.childNodes.length >= 1 ) {
					temp.appendChild( skinpreview.removeChild( skinpreview.firstChild ) );
				}
			}
			delete skinpreview;
			skinpreview = document.getElementById( 'skin-preview' );

		} else {
			// XXX IE before version 9, please die.
			skinpreviewi = document.getElementById( 'skin-preview-img' );
			skineditori = document.getElementById( 'skin-editor-img' );
			skinpreviewi.style.position = skineditori.style.position = 'absolute';
		}

		loadSkinInSkins( lastSkin );
		updateSkins(false);
	}

	function webGLStart() {

		initShaders()
		initBuffers();
		//updateTexture(); //TODO possibily causing an issue

		gl.clearColor(0.0, 0.0, 0.0, 0.5);
		gl.clearDepth(1.0);
		gl.blendFunc(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA);
		gl.enable(gl.BLEND);

		//gl.enable(gl.ALPHA_TEST);
		//gl.alphaTestFunc(gl.LEQUAL);

		gl.enable(gl.DEPTH_TEST);
		gl.depthFunc(gl.LEQUAL);

		resumeAnimation()
		resumeSceneDrawing();
	}

if (document.addEventListener)
	document.addEventListener("DOMContentLoaded", init, false);
else {
	window.onload = init;
}
/* ]]> */
</script>


</head>
<body>

<header><h1><span id="minecraft">Minecraft</span> Skin Editor</h1></header>

<article id="container">
	
 <style>
	html, h1, p, div, article { margin: 0; padding: 0; }
	article, canvas, #skins-container, #skin-preview, #skin-editor, img { display: block; /*IE*/ }

	body { width: 700px; margin: 0 auto; }

	@font-face { font-family: Munro; src: local('Munro'), url(i/munro.ttf); text-rendering: optimizeLegibility; }

	html { height: 100%; color: white; background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAAAAAByaaZbAAAACXZwQWcAAAAwAAAAMADO7oxXAAAACXBIWXMAAABIAAAASABGyWs+AAAAvUlEQVRIx72VwQoEIQxD5zsCBQ/9/2/cQyBk21n2ZHpSxzekUdvnnFMW55zu7m4A3b2/PhFAmzyqSmMA3FZVGQAAJWrA3RStP3KQATQh7Cv1HUmAincMrwEEAIkbopWPFjkNABTnwFjxqwkgAGz1Cr+LyjMDeJkYb2BHBtjq9zHT7pfKdwegXH8A8lTSlVgAkFbKHZ6OKYAA8GqrJ/OnZd0B1G/26dJcTyMD/Krsbu7s0zeBUSZ2FZtV4zrwAZYHGyR4NaVcAAAAAElFTkSuQmCC) #232323; margin:0; font-family: Munro, monospace; }

	body { width: 900px; min-height: 100%; margin: 0 auto; }
	article { position: relative; }

	a { color: inherit; background: transparent; }

	#minecraft { background: url(i/minecraft.png) transparent no-repeat; display: inline-block; text-indent: -9999px; min-width:270px; height:45px; min-height: 45px; }
	header h1 { margin: 0; color: white; background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAMAAABg3Am1AAAAwFBMVEVZPio2JhpFMiMwIhhBLiA6KRwiGBFALB4qHhQ+Kx0uIBYrHhU4KBxWPClJNCUpHBMfFQ4zJBkmGhJKNSUtLS0yIxgoHBRPNyUiIiIgFg8sHxYwMDAqHRQkGRE5KBtCQkIvIRdROCc0JBkkGhI0JRo9LB9KMyM4JxsaEgxeQS0YEAtcQCw3NzcXEAs7Kh0mHBNfQi0iFxA3JxslGRFDMCFMNSQcEw1bQCtIMyQ/LSA1JhsnGxI2JhkhFxAnHBM8Kh3NW47EAAAACXBIWXMAAABIAAAASABGyWs+AAAACXZwQWcAAAAwAAAAMADO7oxXAAACkUlEQVRIS5WUa1NaQRBEVwIkAZFHBCRAQEFQeQuoCWD+/7/K2WmcurkxSdFVTp3p3eaLvTcsl8svpp+m1FosFt3XDCcH7u/vkzdSqwfwNcN8Pr+4uOBgboJ7vZ5WjlndL5pCLpdj6XQ6OZMCWhVwv2OKgZeXFw/AHphMJqzuHwPPz8+yWJxRknVVTgx8M8kSoyR7AA5IbrlcdtaBc9kkJ2QymXa7zTIej2EOANaMSaY7ETzw+PioAOABme5E2Gw2BEql0tnZGUwAYN2YZLoDxIBcrN1up1UOK8DPJdfTA9lsdjgcMhXQKocVIJBcA3+1Wi1r0kHtTUo6oOvr61CtVrG+m2CmB6omBxQD9Xp9vV4rADPXb6qbHFAMNJtNt6bTqaBpSsLt7a1mDHS73Q8mAgLdSwKvRzNst9s/A1tTEn4L9Pt9Hehx9U1APp9POSiMRiOWkUnt1zFAIOXE98C9QqGQDBRMwGq1SjkxcH5+rl2geTgcxH7qZmz1V5NAs9Vqif3UzdMDP0ws+uy0TGKX3gbAzVg+VKlUPpkqJrFL1QSGaqsC+jQoIHYpAMSAasjLlCvAIeaO7lxeXsZvh9rWaDQ+mgQ4T09P7ugOAfgYeH19/WwSKOCOB+BApXYm1Y56ia+uruSwEnYIlETvS4UhICYgh5V7DukAbflPYDAY3N3dURJAneEDOnhPx28ur4cA/3NAFcDtvqe/Bvjipu+axqbAK6Ek+YTUH4Af4lPHhAH5MUBJkgH1B3h4eNjv90wYkB94VpRkZeJAqxyuUh4mDMgP/PGUcG9ubgQ+JedjgHrIpV7/DjRMMcCLmc1mtEXgU3I+BugTi/on5n8s1oqcCZ8eWCwWvBXKuDDBBMRakTOBX0m2AlUoQDmeAAAAAElFTkSuQmCC) transparent repeat-x; height:45px; vertical-align: text-bottom; line-height: 60px; }

	canvas, .box, div#skin-preview { border: 3px solid grey; background: transparent; background: rgba(0,0,0,0.4); font-family: Munro, monospace; }
	canvas, .box, div#skin-preview {
	-moz-border-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAJCAYAAADgkQYQAAAAAXNSR0IArs4c6QAAAF9JREFUGNNjYGBg+E8EZvh/7tw5MJ48eTIKzs3NRShavXr1/9jYWBRcUFDw393dHVVRWloamAMDdXV1qIpARoN0E6uIBa8ikBtAEiDc0NDwH6ui9PR0FIcnJCSgKiKEAVysfvK8Ec9lAAAAAElFTkSuQmCC) 3 stretch stretch;
	-webkit-border-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAJCAYAAADgkQYQAAAAAXNSR0IArs4c6QAAAF9JREFUGNNjYGBg+E8EZvh/7tw5MJ48eTIKzs3NRShavXr1/9jYWBRcUFDw393dHVVRWloamAMDdXV1qIpARoN0E6uIBa8ikBtAEiDc0NDwH6ui9PR0FIcnJCSgKiKEAVysfvK8Ec9lAAAAAElFTkSuQmCC) 3 stretch stretch;
	-o-border-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAJCAYAAADgkQYQAAAAAXNSR0IArs4c6QAAAF9JREFUGNNjYGBg+E8EZvh/7tw5MJ48eTIKzs3NRShavXr1/9jYWBRcUFDw393dHVVRWloamAMDdXV1qIpARoN0E6uIBa8ikBtAEiDc0NDwH6ui9PR0FIcnJCSgKiKEAVysfvK8Ec9lAAAAAElFTkSuQmCC) 3 stretch stretch;
	border-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAJCAYAAADgkQYQAAAAAXNSR0IArs4c6QAAAF9JREFUGNNjYGBg+E8EZvh/7tw5MJ48eTIKzs3NRShavXr1/9jYWBRcUFDw393dHVVRWloamAMDdXV1qIpARoN0E6uIBa8ikBtAEiDc0NDwH6ui9PR0FIcnJCSgKiKEAVysfvK8Ec9lAAAAAElFTkSuQmCC) 3 stretch stretch; }

	.sign { padding: 6px 4px; text-align:center; color: black; margin: 2px; border: 0; background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAYCAYAAAC8/X7cAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9sCFRE6LdS4+coAAAG7SURBVFjD1ZdBWsIwEIW5GQq4dKF8wh1UBAQvoAhtab2CO0UpZ6xtJi9tJg1BdrP4F4Q0My+Zvkw7n6vroo1DNrbAeJ6NFHz+djFQ7OLbVvbpyMIXl8fh8Q8fYwV+d8QLiGa9ouInGRKxTV4+nDcW2JVjRHuiocTCwocWPL7JTecrXwCOBAM4stzQXjI8gX16dyZUUhCAeBxffPkC3h66RZPV44XifWKTPPcVSBhsppeKaNojZjbZcmCRMvD85olYgwmB+PG8b4H15QtACXHbTMpJFdzW+JF/g4j4LctCsbXBOuZ/DS8lgA3z2SpeZvkCQhcJt03ffJQIT/hc3PiE8xKLF8AvsNpGj9sXQOm43Ci+NKaEtEBnvi5FlNCp8eULgB3BnriNrjXbykIbNpoCbYcoobhaqySZAzKD7OWKWBKIayxVr+faKcXHOtxO5Qvw2WiofQ6VFBLldnqqjZ4aX74AHCUX4mvmfBfZf192jKN0uABfM2cuMv49IFZAKLD7gWG3FABC6oTstrnegPbxUHxu89hw+QJe77tFBbdTDpor01ZrYHuGqU3atNyF2z4DrMfj+PIx7bR0AX97PON3/TkS7QAAAABJRU5ErkJggg==) no-repeat #ab8c55; background-size: 100% 100%; }

	div#skin-preview { overflow: hidden; }
	div#skin-preview p { position: absolute; color: white; background: transparent; top: 5px; left: 5px; }

	#skin-preview, #skin-editor, #wip, #skins-container, #colourpalette { position: absolute; }
	#wip, #colourpalette, #skins-container, #skin-editor, #skin-editor-img, #doshit { left: 374px; width: 512px; }

	#wip { font-size: 115%; /* centralise for a lightbox? */ top:570px; left: 10px; height: 130px; width: 324px; }
	#wip code {font-family: Munro, monospace; }
	#wip a { color: black !important;}

	#skins-container { padding:0; background: rgba(0,0,0,0.5); /* later top: 320px; */ top: 370px; height: 149px; min-width:260px; overflow: scroll; overflow-y: hidden; white-space: nowrap; }
	#skins-container:empty { display:none; }
	#skins-container div { padding: 2px 4px; display: inline-block; text-align: center; height: 124px; width: 80px; overflow: hidden; }
	#skins-container p { cursor: pointer; color: white; background: transparent; overflow: ellipsis; }
	#skins-container img { margin: 0 3px; cursor: pointer; }

	#colourpalette { border: 2px outset #eee; border-image: url(); z-index: 20; left: 375px; top: 275px; color: #999; background: #ccc; padding: 0 4px; width: 503px; }
	#colourpalette span { display: inline-block; text-indent: -9999px; background: transparent; overflow: hidden; width: 21px; height: 21px; border: 2px inset lightgrey; }

	#doshit { position: absolute; top: 335px; }
	#skin-editor, #skin-editor-img, #skin-preview, #skin-preview-img { top: 5px; }
	#skin-preview, #skin-preview-img { left: 10px; }

	#skin-editor.erasing, #colourpalette #erase { cursor: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAZCAYAAAAiwE4nAAAAAXNSR0IArs4c6QAAAAZiS0dEAAAAAAAA+UO7fwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9sCFgA4GL9sOcIAAAF2SURBVEjHY2AgDvxnoCP4DwL0tHTUwqFvId1TKc18gI6pqR4zjtABmiH/SVQ/uHw4aOMYA3x5+rzj8pQ5/0/WtP3fHZEKx3ui08F4d1QaGO8KTfp/ddbC/xTnw7Nt/f/vrtn0/9vrN/+/v3kLpjHwy9f/P91/9P/2srX/r81e9J9sC99eutZxoXfq/6/PXoAxyGAYGxc+09xDvoX3N23//+L4aaIsguHzHRPJsxAYRB1Xps8HBxmxloHwhe4p5Fl4b/3W/++u3yLJMlA8kpRwYAygRR23lq6BByUwpRJl4eNd+/8/2LqL9PwKSmnExhsslYLYoCgA0h0kWwiKhx9v3///8f7D/58fPkLwp8+YGCgOVgfEj7bv/f9g807ySqMTlc0kpUyQL28sXPH/+bFT5Fl4qrb9/4fb94i28Nnh4//vrNxAflkLSmkvT50D+xLdp6AEBMMwsVuLV/2/s3ojZYU7KB4PpBaAy0h8eF989n9QikbWCwBbhQgfoI/AOgAAAABJRU5ErkJggg==) 9 9, auto; }
	#skin-editor.painting, #colourpalette span { cursor: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAZCAYAAAAiwE4nAAAAAXNSR0IArs4c6QAAAAZiS0dEAAAAAAAA+UO7fwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9sCFgA4BkVjBKEAAABBSURBVEjHY2AgDvxnoCP4DwL0tHTUwqFvId1TKc18gI6pqR4zjtABmiH/SVQ/uHw4aON4tCwdtXC0LB0Fo2CQAAAjsYCAJaT9SgAAAABJRU5ErkJggg==) 9 9, auto; }


	/* if the user doesn’t have JS, or Canvas support, no point doing this */
	#skin-preview.enabled { cursor: pointer; }
	#noscript { clear:both;}
	#noscript.disabled { display: none; }
	#skin-editor.enabled, #colourpalette #erase, #skin-editor-img { background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH2wIODxsDFVG/AgAAAClJREFUGNNjvHnz5n8GJKCmpobMZWBiIAAoV8D4//9/FDfcunWL3m4AADstCpWDR4PDAAAAAElFTkSuQmCC); }

 	#skin-selector { position: absolute; top: 570px; left: 10px; visibility: hidden; }

	.button { display: inline-block; background: #888; padding: 1px 3px ; margin: 2px; border: 2px outset #ccc; color: white; text-shadow: black 1px 1px; text-decoration:none; }
	.button:hover, .button:focus { color: #ff4; background: #48e; border: 2px outset #7ae; }
	.button:active { color: #ddd; background: #999; border: 2px inset #bbb; }

	#output canvas { float: left; }
	#output h1 { font-size: 20px; }
	#output p {clear:both; }
	#output { padding: 4px; position: absolute; top: 570px; left: 374px; }
	#output .button { float: right; clear: right; margin: 2px 4px;  }
	
	footer { position: absolute; bottom: 2px; height: 50px; }

 </style>
 <p id="wip" class="sign box">Work‐in‐progress. Please send suggestions to <a href="mailto:jdrinkwater@gmail.com">jdrinkwater@gmail.com</a>. Code history <a href="http://johndrinkwater.name/code/mcse/">here</a>, licensed AGPL where applicable. <br/>
© <a href="http://johndrinkwater.name/">JD</a>, <a href="http://sylvester.jcoglan.com/">JC</a>, <a href="http://mojang.com/">Mojang</a>, <a href="http://www.tenbytwenty.com/munro.php">10×20</a>, <a href="http://learningwebgl.com/blog/">learningWebGL</a>.<br />
<code>HTML5</code> demo: <code>canvas</code>, <code>WebGL</code>, <code>localStorage</code>.</p>

 <canvas id="skin-preview" width="350" height="500">
  <img id="skin-preview-img" src="i/3d-tease.png" width="350" height="500" alt="Minecraft Default Skin Preview" />
  <p>Sorry, you browser does not support WebGL. Pretend this image is rendered by your graphics card in real‐time.</p>
 </canvas>

 <canvas id="skin-editor" width="512" height="256">
  <img id="skin-editor-img" src="i/char.png" width="512" height="256" alt="Minecraft Default Skin" />
  <p>Sorry, your browser does not support Canvas. Which kinda makes this whole application redundant.</p>
 </canvas>

 <div id="doshit"><a href="#finishedpokingbits" id="saveSkin" class="button">Save</a> <a href="#Imadeabooboo" id="resetSkin" class="button">Start Again</a> <a href="#wedontneedclouds" id="openFile" class="button">Open From Disk</a> <a href="#notcheatthis" id="pushSkin" class="button">I’m Finished Drawing!</a></div>
 <div id="output" class="box"><h1>I think I’m ready to save… </h1><canvas id="skin-editor-mini" name="image" width="64" height="32">?</canvas><a class="button" href="#savetonotchbabyyeah" id="submitmojang">… to Minecraft!</a><br /><!--<a href="#libertarianmoi" id="jsapisucksatm" class="button">… to Disk.</a> because you cant without hacks --><p>…to Disk: right click this image and select Save.</p></div>

 <p id="noscript">While I’m the first person to complain about the needs of JavaScript for many a‐website, this is an ‘application’, it can’t run without the code being used. Please toggle NoScript, or try this in a browser that supports JavaScript.</p>

</article>

<footer><p>Parts <a href="http://creativecommons.org/licenses/by-sa/2.0/deed.en_GB"><svg xmlns="http://www.w3.org/2000/svg" style="vertical-align:middle; padding-bottom:3px; width:.95em; height: .95em;" width="16px" height="16px" viewBox="-2 -2 66 66"><circle cx="32" cy="32" r="28" fill="none" stroke="white" stroke-width="7px" /><path d="m19.63,41.14 c-2.8,-1 -5.1,-4 -5.5,-7.43 -0.6,-5.06 1.327,-9 5.2,-10.75 2.1,-0.96 5.93,-0.93 8.2,0.05 1.4,0.6 4,3 4,3.6 0,0.1 -0.9,0.64 -2,1.17 l-2,1 c-0.87,-1.06 -1.9,-1.74 -3.1,-2.3 -1.37,-0.26 -3,0.35 -3.74,1.4 -1.23,1.72 -1.3,6.2 -0.15,7.974 0.6,0.92 1.6,1.6 2.6,1.6 2,0.16 2.5,-0.02 3.7,-1.26 l1.2,-1.26 1.54,0.85 c0.85,0.47 1.66,0.96 1.8,1.1 0.52,0.47 -1.86,2.9 -3.77,3.85 -1.63,0.8 -2.14,0.92 -4.3,0.9 -1.34,-0.013 -3,-0.22 -3.67,-0.46z m18.32,0 c-2.8,-1 -5.1,-4 -5.5,-7.43 -0.6,-5.06 1.327,-9 5.2,-10.75 2.1,-0.96 5.93,-0.93 8.2,0.05 1.4,0.6 4,3 4,3.6 0,0.1 -0.9,0.64 -2,1.17 l-2,1 c-0.87,-1.06 -1.9,-1.74 -3.1,-2.3 -1.37,-0.26 -3,0.35 -3.74,1.4 -1.23,1.72 -1.3,6.2 -0.15,7.974 0.6,0.92 1.6,1.6 2.6,1.6 2,0.16 2.5,-0.02 3.7,-1.26 l1.2,-1.26 1.54,0.85 c0.85,0.47 1.66,0.96 1.8,1.1 0.52,0.47 -1.86,2.9 -3.77,3.85 -1.63,0.8 -2.14,0.92 -4.3,0.9 -1.34,-0.013 -3,-0.22 -3.67,-0.46z" fill="white" stroke="white" stroke-width="1px" /><switch><g></g><foreignObject width="2em" height="1em">CC</foreignObject></switch></svg> BY‑SA</a> John Drinkwater 2002–2011, see About</p></footer>

</body></html>
